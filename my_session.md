# AI Gateway é¡¹ç›® - å¤´è„‘é£æš´ä¼šè¯è®°å½•

> **Session ID**: ses_3c504e596ffeNvQiVDfb9WS7uW  
> **æ—¥æœŸ**: 2026-02-08  
> **æ›´æ–°æ—¶é—´**: 2026-02-08 (æ–°å¢åŸå§‹æ•°æ®ç®¡ç†æ¨¡å—)  
> **æ¶ˆæ¯æ•°**: 19

---

## ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [è®¾è®¡å†³ç­–æ±‡æ€»](#è®¾è®¡å†³ç­–æ±‡æ€»)
3. [å‰ç«¯æ¶æ„è®¾è®¡](#å‰ç«¯æ¶æ„è®¾è®¡)
4. [åç«¯æ¶æ„è®¾è®¡](#åç«¯æ¶æ„è®¾è®¡)
5. [æ•°æ®åº“Schemaè®¾è®¡](#æ•°æ®åº“schemaè®¾è®¡)
6. [APIè¯¦ç»†è§„èŒƒ](#apiè¯¦ç»†è§„èŒƒ)
7. [Skillç³»ç»Ÿè®¾è®¡](#skillç³»ç»Ÿè®¾è®¡)
8. [åŸå§‹æ•°æ®ç®¡ç†æ¨¡å—](#åŸå§‹æ•°æ®ç®¡ç†æ¨¡å—) â­æ–°å¢
9. [é…ç½®çº¦æŸ](#é…ç½®çº¦æŸ)

---

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯
AI Gatewayï¼ˆAIèŠ‚æµç½‘å…³ï¼‰æ˜¯ä¸€ä¸ªæ™ºèƒ½AIä»£ç†ç³»ç»Ÿï¼Œæ”¯æŒï¼š
- è™šæ‹Ÿæ¨¡å‹ä»£ç†ï¼ˆå¤åˆ»SiliconFlowæ ¼å¼ï¼‰
- æ™ºèƒ½æ¨¡å‹è·¯ç”±ï¼ˆBig/Smallæ¨¡å‹è‡ªåŠ¨åˆ‡æ¢ï¼‰
- çŸ¥è¯†æå–ä¸RAGæ£€ç´¢
- åª’ä½“å¤„ç†ï¼ˆWhisperè½¬å½•ï¼‰
- RSSè®¢é˜…ç®¡ç†
- å¯æ’æ‹”Skillç³»ç»Ÿ

### æŠ€æœ¯æ ˆç¡®è®¤
| å±‚çº§ | æŠ€æœ¯é€‰æ‹© |
|------|---------|
| å‰ç«¯ | Vue 3 + TypeScript + Element Plus |
| åç«¯ | FastAPI (Python) |
| æ•°æ®åº“ | MongoDB (å¯¹è¯/RSS/æ—¥å¿—) + Redis (ç¼“å­˜/ä¼šè¯) + Qdrant (å‘é‡åº“) |
| éƒ¨ç½² | Docker Compose |
| Whisper | CPUå¼€å‘æ¨¡å¼ / GPUéƒ¨ç½²æ¨¡å¼ |

---

## è®¾è®¡å†³ç­–æ±‡æ€»

### æ ¸å¿ƒå†³ç­–
| # | å†³ç­–é¡¹ | ç¡®è®¤æ–¹æ¡ˆ |
|---|--------|---------|
| 1 | å‰ç«¯å“åº”å¼ | ä»…WEBç”µè„‘ç«¯ï¼Œæ— éœ€ç§»åŠ¨ç«¯é€‚é… |
| 2 | ç™»å½•è®¤è¯ | **æ— è®¤è¯**ï¼Œæœ¬åœ°éƒ¨ç½²ç›´æ¥è®¿é—® |
| 3 | APIç‰ˆæœ¬æ§åˆ¶ | ä»£ç†API: `proxy/api/v1`ï¼Œç®¡ç†API: `proxy/admin/*` |
| 4 | ä¼šè¯å­˜å‚¨ | åˆ†å±‚å­˜å‚¨ - Redis(TTL=24h) + MongoDBæŒä¹…åŒ– |
| 5 | å¯¹è¯ç•Œé¢å¸ƒå±€ | å·¦å³åˆ†æ ï¼ˆå·¦ä¾§ä¼šè¯åˆ—è¡¨å¸¸é©»ï¼‰ |
| 6 | proxy_keyæ˜¾ç¤º | éƒ¨åˆ†éšè—ï¼ˆ`sk-xxx...xxx`æ ¼å¼ï¼‰ |
| 7 | é…ç½®ç®¡ç† | **åªå­˜config.ymlï¼Œæ•°æ®åº“ä¸å­˜ä»»ä½•é…ç½®** |
| 8 | Skillæ‰§è¡Œæ–¹å¼ | Pythonå‡½æ•°åŠ¨æ€åŠ è½½ |
| 9 | Webæœç´¢ | APIè°ƒç”¨æ–¹å¼ï¼ˆSearxNG/LibreX/4getï¼‰ |
| 10 | æ–‡ä»¶ä¸Šä¼ é™åˆ¶ | 100MBï¼ˆä¸åˆ†ç‰‡ï¼‰ |

### âš ï¸ é…ç½®ç®¡ç†é“å¾‹
> - æ‰€æœ‰é…ç½®å¿…é¡»ä¿®æ”¹ `config.yml`
> - æ•°æ®åº“**ç»å¯¹ä¸ä¿å­˜ä»»ä½•é…ç½®**
> - ä»… `virtual_models` ä¸‹çš„è™šæ‹Ÿæ¨¡å‹å¯é€šè¿‡APIæ·»åŠ 
> - å…¶ä»–é…ç½®å¢åŠ **å¿…é¡»ç»è¿‡ç”¨æˆ·åŒæ„ï¼Œæ°¸è¿œ**

---

## å‰ç«¯æ¶æ„è®¾è®¡

### è·¯ç”±ç»“æ„
```
/                         â†’ é‡å®šå‘åˆ° /dashboard
/dashboard                â†’ ä»ªè¡¨ç›˜é¦–é¡µ
/chat                     â†’ å¯¹è¯ç®¡ç†ï¼ˆå·¦å³åˆ†æ å¸ƒå±€ï¼‰
/models                   â†’ è™šæ‹Ÿæ¨¡å‹ç®¡ç†
/models/:id/edit          â†’ æ¨¡å‹ç¼–è¾‘
/raw-data                 â†’ åŸå§‹æ•°æ®ç®¡ç† â­æ–°å¢
/raw-data/:sourceId       â†’ åŸå§‹æ•°æ®è¯¦æƒ…/ç¼–è¾‘ â­æ–°å¢
/knowledge                â†’ çŸ¥è¯†åº“ç®¡ç†
/knowledge/query          â†’ çŸ¥è¯†æ£€ç´¢æµ‹è¯•
/rss                      â†’ RSSè®¢é˜…ç®¡ç†
/rss/:feedId              â†’ è®¢é˜…è¯¦æƒ…+æ–‡ç« åˆ—è¡¨
/media                    â†’ åª’ä½“ç®¡ç†ï¼ˆå«å­èœå•ï¼‰
â”‚   â”œâ”€â”€ /media/video      â†’ è§†é¢‘æ–‡ä»¶ç®¡ç†
â”‚   â”œâ”€â”€ /media/audio      â†’ éŸ³é¢‘æ–‡ä»¶ç®¡ç†
â”‚   â””â”€â”€ /media/text       â†’ æ–‡æœ¬&å›¾ç‰‡ç®¡ç†
/logs                     â†’ ç³»ç»Ÿæ—¥å¿—æŸ¥çœ‹
/config                   â†’ ç³»ç»Ÿé…ç½®ç®¡ç†
```

### ä¾§è¾¹æ èœå•ç»“æ„
```
ğŸ¤– AI Gateway
â”œâ”€â”€ ğŸ“Š ä»ªè¡¨ç›˜
â”œâ”€â”€ ğŸ’¬ å¯¹è¯ç®¡ç†
â”œâ”€â”€ ğŸ“„ åŸå§‹æ•°æ®          â­æ–°å¢
â”‚   â”œâ”€â”€ ğŸ’¬ å¯¹è¯æ¥æº
â”‚   â”œâ”€â”€ ğŸ“¡ RSSæ¥æº
â”‚   â”œâ”€â”€ ğŸ¥ è§†é¢‘æ¥æº
â”‚   â”œâ”€â”€ ğŸµ éŸ³é¢‘æ¥æº
â”‚   â””â”€â”€ ğŸ“ æ–‡æœ¬&å›¾ç‰‡æ¥æº
â”œâ”€â”€ ğŸ¤– æ¨¡å‹ç®¡ç†
â”œâ”€â”€ ğŸ“š çŸ¥è¯†åº“
â”œâ”€â”€ ğŸ“¡ RSSè®¢é˜…
â”œâ”€â”€ ğŸ“ åª’ä½“ç®¡ç†
â”œâ”€â”€ ğŸ“ ç³»ç»Ÿæ—¥å¿—
â””â”€â”€ âš™ï¸ ç³»ç»Ÿé…ç½®
```

---

## åç«¯æ¶æ„è®¾è®¡

### APIåˆ†å±‚æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä»£ç†å±‚ - å¤åˆ»SiliconFlow OpenAIå…¼å®¹æ ¼å¼                      â”‚
â”‚  Base: /proxy/api/v1                                        â”‚
â”‚  Auth: Bearer {proxy_key}                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  POST   /chat/completions    â†’ èŠå¤©è¡¥å…¨ï¼ˆæµå¼/éæµå¼ï¼‰       â”‚
â”‚  GET    /models              â†’ è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨              â”‚
â”‚  POST   /embeddings          â†’ æ–‡æœ¬å‘é‡åŒ–ï¼ˆå¯é€‰ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç®¡ç†å±‚ - RESTfulé£æ ¼ï¼ˆæ— è®¤è¯ï¼‰                              â”‚
â”‚  Base: /proxy/admin                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  /models                 GET|POST|DELETE|PUT                â”‚
â”‚  /chat/sessions          GET|POST|DELETE                    â”‚
â”‚  /chat/sessions/:id      GET|DELETE                         â”‚
â”‚  /raw-data               GET|POST|DELETE|PUT â­æ–°å¢         â”‚
â”‚  /raw-data/:id/extract   POST â­æ–°å¢ï¼ˆæ‰‹åŠ¨æå–çŸ¥è¯†ï¼‰         â”‚
â”‚  /raw-data/batch         POST â­æ–°å¢ï¼ˆæ‰¹é‡æ“ä½œï¼‰             â”‚
â”‚  /knowledge/query        POST                               â”‚
â”‚  /knowledge/documents    GET|POST|DELETE                    â”‚
â”‚  /rss/feeds              GET|POST                           â”‚
â”‚  /rss/feeds/:id          GET|PUT|DELETE                     â”‚
â”‚  /media/files            GET|POST|DELETE                    â”‚
â”‚  /media/files/:id/transcribe POST                           â”‚
â”‚  /logs                   GET                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ—¥å¿—è¾“å‡ºç­–ç•¥
```
æ—¥å¿—åŒè½¨åˆ¶
â”œâ”€â”€ 1. MongoDBå­˜å‚¨ï¼ˆæ‰€æœ‰æ—¥å¿—ï¼‰
â”‚   â”œâ”€â”€ system_logs    â†’ DEBUG/INFO/WARNING/ERROR
â”‚   â””â”€â”€ operation_logs â†’ ç”¨æˆ·æ“ä½œè®°å½•
â”‚
â””â”€â”€ 2. æ–‡ä»¶å¯¼å‡ºï¼ˆ/logsæ–‡ä»¶å¤¹ï¼‰â­ERRORå¼ºåˆ¶ä¿å­˜
    â”œâ”€â”€ system/system_2026-02-08.log
    â”œâ”€â”€ operation/operation_2026-02-08.log
    â””â”€â”€ error/error_2026-02-08.log  â† ERRORå¼ºåˆ¶ä¿å­˜ï¼ˆå†—ä½™å¤‡ä»½ï¼‰

æ—¥å¿—è½®è½¬ï¼šæŒ‰å¤©åˆ†å‰²ï¼Œä¿ç•™30å¤©
```

---

## æ•°æ®åº“Schemaè®¾è®¡

### MongoDB Collections

#### 1. conversations - å¯¹è¯ä¼šè¯
```yaml
conversations:
  - _id: ObjectId
  - session_id: string (å”¯ä¸€)
  - title: string
  - virtual_model: string (ä»…å¼•ç”¨ï¼Œéé…ç½®)
  - current_model: enum ["small", "big"]
  - message_count: int
  - created_at: datetime
  - updated_at: datetime
```

#### 2. messages - æ¶ˆæ¯è®°å½•
```yaml
messages:
  - _id: ObjectId
  - session_id: string (ç´¢å¼•)
  - role: enum ["user", "assistant", "system"]
  - content: string
  - model_used: string
  - tokens_used: int
  - routing_reason: string (keyword/skill/redis/force)
  - created_at: datetime
```

#### 3. knowledge_sources - çŸ¥è¯†æºï¼ˆç»Ÿä¸€æŠ½è±¡å±‚ï¼‰â­æ ¸å¿ƒè¡¨
```yaml
knowledge_sources:
  - _id: ObjectId
  - source_id: string (å”¯ä¸€ï¼Œå¦‚ "raw_chat_001", "raw_rss_abc123")
  - source_type: enum ["chat", "video", "audio", "text", "image", "rss"]
  - source_category: string (æ›´ç»†åˆ†ç±»ï¼Œå¦‚ "å¯¹è¯è®°å½•", "æ’­å®¢éŸ³é¢‘", "æ–°é—»RSS")
  
  # åŸå§‹å†…å®¹ï¼ˆå¯ç¼–è¾‘ï¼‰
  - raw_content: 
      title: string
      content: string (å¯ç¼–è¾‘çš„åŸå§‹æ–‡æœ¬)
      url: string (å¯é€‰)
      file_path: string
      mime_type: string
  
  # æ¥æºå…ƒæ•°æ®
  - metadata:
      source_name: string (æ¥æºåç§°ï¼Œå¦‚"AIç§‘æŠ€æ—¥æŠ¥", "meeting_001.mp4")
      source_session: string (å¯¹è¯æ¥æºä¼šè¯ID)
      source_feed: string (RSS feedåç§°)
      source_file: string (æ–‡ä»¶ID)
      created_by: string
      imported_at: datetime
  
  # å¤„ç†çŠ¶æ€è¿½è¸ª
  - processing_status: enum ["pending", "processing", "extracted", "failed", "archived"]
  - extraction_count: int (è¢«æå–ä¸ºçŸ¥è¯†çš„æ¬¡æ•°)
  - vector_ids: array[string] (å·²è½¬å­˜çš„å‘é‡ID)
  
  # å¯ç¼–è¾‘æ ‡è®°
  - is_edited: boolean (æ˜¯å¦è¢«äººå·¥ç¼–è¾‘è¿‡)
  - original_content: string (åŸå§‹å†…å®¹å¤‡ä»½)
  
  - created_at: datetime
  - updated_at: datetime
```

#### 4. rss_feeds_status - RSSè¿è¡Œæ—¶çŠ¶æ€
```yaml
rss_feeds_status:
  - _id: ObjectId
  - feed_name: string (å…³è”config.ymlä¸­çš„name)
  - last_fetch_at: datetime
  - article_count: int
  - last_error: string
  - updated_at: datetime
```

#### 5. rss_articles - RSSæ–‡ç« 
```yaml
rss_articles:
  - _id: ObjectId
  - feed_name: string
  - title: string
  - link: string
  - content: string
  - published_at: datetime
  - knowledge_source_id: string
  - created_at: datetime
```

#### 6. media_files - åª’ä½“æ–‡ä»¶
```yaml
media_files:
  - _id: ObjectId
  - file_id: string (å”¯ä¸€)
  - filename: string
  - original_name: string
  - file_type: enum ["video", "audio", "text", "image"]
  - mime_type: string
  - size_bytes: int
  - storage_path: string
  - metadata: object
  - process_status: enum ["uploaded", "transcribing", "extracting", "completed", "failed"]
  - process_result: string
  - knowledge_source_id: string
  - created_at: datetime
```

#### 7. system_logs - ç³»ç»Ÿæ—¥å¿—
```yaml
system_logs:
  - _id: ObjectId
  - level: enum ["DEBUG", "INFO", "WARNING", "ERROR"]
  - module: string
  - message: string
  - details: object
  - created_at: datetime
```

#### 8. operation_logs - æ“ä½œæ—¥å¿—
```yaml
operation_logs:
  - _id: ObjectId
  - action: string
  - resource_type: string
  - resource_id: string
  - user: string (adminæˆ–IP)
  - details: object
  - ip_address: string
  - user_agent: string
  - created_at: datetime
```

### æ•°æ®æµè½¬å…³ç³»å›¾
```
ğŸ’¬ å¯¹è¯æ¶ˆæ¯ â”€â”€â”€â”€â”€â”€â”
ğŸ“¡ RSSæ–‡ç«   â”€â”€â”€â”€â”€â”€â”¼â”€â”€> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”€â”€> ğŸ” çŸ¥è¯†åº“
ğŸ¥ è§†é¢‘æ–‡ä»¶ â”€â”€â”€â”€â”€â”€â”¤    â”‚  Raw Data       â”‚      (Qdrant)
ğŸµ éŸ³é¢‘æ–‡ä»¶ â”€â”€â”€â”€â”€â”€â”¼â”€â”€> â”‚  (MongoDB)      â”‚
ğŸ“ æ–‡æœ¬æ–‡ä»¶ â”€â”€â”€â”€â”€â”€â”¤    â”‚                 â”‚
ğŸ–¼ï¸ å›¾ç‰‡æ–‡ä»¶ â”€â”€â”€â”€â”€â”€â”˜    â”‚  - å¯ç¼–è¾‘       â”‚
                       â”‚  - å¯æœç´¢       â”‚
                       â”‚  - å¯è¿½æº¯       â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                         ğŸ“¤ çŸ¥è¯†æå–
                         (Skill/æ‰‹åŠ¨)
                                â”‚
                                â–¼
                         ğŸ“š æå–çš„çŸ¥è¯†
                         (knowledge_extracts)
```

---

## APIè¯¦ç»†è§„èŒƒ

### ä»£ç†å±‚ API

#### POST /proxy/api/v1/chat/completions
èŠå¤©è¡¥å…¨ï¼ˆå¤åˆ»OpenAIæ ¼å¼ï¼‰

**Request:**
```json
{
  "model": "demo1",
  "messages": [
    {"role": "system", "content": "You are a helpful assistant"},
    {"role": "user", "content": "ä½ å¥½"}
  ],
  "stream": true,
  "temperature": 0.7,
  "max_tokens": 2000
}
```

**Response (éæµå¼):**
```json
{
  "id": "chatcmpl-xxx",
  "object": "chat.completion",
  "created": 1704067200,
  "model": "Pro/deepseek-ai/DeepSeek-V3.2",
  "choices": [{
    "index": 0,
    "message": {
      "role": "assistant",
      "content": "ä½ å¥½ï¼å¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚"
    },
    "finish_reason": "stop"
  }],
  "usage": {
    "prompt_tokens": 20,
    "completion_tokens": 15,
    "total_tokens": 35
  }
}
```

### ç®¡ç†å±‚ API

#### GET /proxy/admin/models
è·å–è™šæ‹Ÿæ¨¡å‹åˆ—è¡¨ï¼ˆä»config.ymlè¯»å–+è¿è¡Œæ—¶çŠ¶æ€ï¼‰

**Response:**
```json
{
  "models": [
    {
      "name": "demo1",
      "proxy_key": "sk-xxx...xxx",
      "base_url": "http://192.168.1.100:8000/proxy/v1",
      "current": "small",
      "enabled": true,
      "small": {
        "model": "deepseek-ai/DeepSeek-R1-0528-Qwen3-8B",
        "status": "active"
      },
      "big": {
        "model": "Pro/deepseek-ai/DeepSeek-V3.2",
        "status": "standby"
      },
      "stats": {
        "today_requests": 125,
        "total_tokens": 45600
      }
    }
  ]
}
```

#### POST /proxy/admin/knowledge/query
çŸ¥è¯†æ£€ç´¢

**Request:**
```json
{
  "query": "ç³»ç»Ÿæ¶æ„è®¾è®¡",
  "top_k": 5,
  "source_types": ["chat", "rss"],
  "threshold": 0.76
}
```

**Response:**
```json
{
  "results": [
    {
      "source_id": "chat_001_msg_005",
      "source_type": "chat",
      "title": "ä¼šè¯: ç³»ç»Ÿæ¶æ„è®¨è®º",
      "content": "ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„...",
      "similarity": 0.92,
      "created_at": "2026-02-08T10:00:00Z"
    }
  ]
}
```

---

## Skillç³»ç»Ÿè®¾è®¡

### Skillç›®å½•ç»“æ„
```
./skill/
â”œâ”€â”€ router/
â”‚   â””â”€â”€ v1/
â”‚       â”œâ”€â”€ SKILL.md
â”‚       â””â”€â”€ skill.py
â”œâ”€â”€ knowledge/
â”‚   â”œâ”€â”€ v1/
â”‚   â””â”€â”€ topics/
â”‚       â””â”€â”€ v1/
â”œâ”€â”€ web_search/
â”‚   â””â”€â”€ v1/
â”œâ”€â”€ rss/
â”‚   â””â”€â”€ v1/
â”œâ”€â”€ text/
â”‚   â””â”€â”€ v1/
â””â”€â”€ custom/
    â”œâ”€â”€ router/v2/
    â”œâ”€â”€ knowledge/v2/
    â””â”€â”€ web_search/v3/
```

### SKILL.md è§„èŒƒç¤ºä¾‹
```markdown
# Skill: router/v1

## æè¿°
æ ¹æ®å¯¹è¯å†…å®¹æ™ºèƒ½åˆ¤æ–­ä½¿ç”¨bigæ¨¡å‹è¿˜æ˜¯smallæ¨¡å‹

## è¾“å…¥
```json
{
  "query": "ç”¨æˆ·å½“å‰è¾“å…¥",
  "session_history": ["æœ€è¿‘3è½®å¯¹è¯"],
  "current_model": "small"
}
```

## è¾“å‡º
```json
{
  "target_model": "big" | "small",
  "confidence": 0.85,
  "reason": "å¤æ‚ç¼–ç¨‹é—®é¢˜ï¼Œéœ€è¦æ›´å¼ºçš„æ¨ç†èƒ½åŠ›"
}
```

## è§¦å‘æ¡ä»¶
- è™šæ‹Ÿæ¨¡å‹é…ç½®ä¸­ router.skill.enabled = true
- å…³é”®è¯è·¯ç”±æœªåŒ¹é…
```

---

## åŸå§‹æ•°æ®ç®¡ç†æ¨¡å— â­æ–°å¢

### æ¦‚è¿°
ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ¥æºçš„åŸå§‹å†…å®¹ï¼ˆå¯¹è¯ã€RSSã€è§†é¢‘ã€éŸ³é¢‘ã€æ–‡æœ¬ã€å›¾ç‰‡ï¼‰ï¼Œæä¾›å®Œæ•´çš„CRUDåŠŸèƒ½å’Œå¤šç»´åº¦æœç´¢ã€‚

### å‰ç«¯UIè®¾è®¡

#### åŸå§‹æ•°æ®åˆ—è¡¨é¡µé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“„ åŸå§‹æ•°æ®                     ğŸ” æœç´¢åŸå§‹æ•°æ®...        ğŸ”” âš™ï¸ ğŸ‘¤ Admin â–¼  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                                                   â”‚
â”‚ æ¥æºåˆ†ç±»  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚          â”‚  â”‚ ğŸ“„ åŸå§‹æ•°æ®ç®¡ç†                              [+ å¯¼å…¥æ•°æ®]  â”‚   â”‚
â”‚ ğŸ” å…¨éƒ¨   â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚   â”‚
â”‚ (1,523)  â”‚  â”‚                                                             â”‚   â”‚
â”‚          â”‚  â”‚ ç»Ÿè®¡: ğŸ’¬ 523 â”‚ ğŸ“¡ 421 â”‚ ğŸ¥ 156 â”‚ ğŸµ 89 â”‚ ğŸ“ 334          â”‚   â”‚
â”‚ ğŸ’¬ å¯¹è¯   â”‚  â”‚                                                             â”‚   â”‚
â”‚ (523)    â”‚  â”‚ ç­›é€‰: [å…¨éƒ¨â–¼] [çŠ¶æ€â–¼] [æ—¶é—´â–¼] [ğŸ“¤ å¯¼å‡º] [ğŸ—‘ï¸ æ‰¹é‡åˆ é™¤]    â”‚   â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ ğŸ“¡ RSS   â”‚                                                                   â”‚
â”‚ (421)    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚          â”‚  â”‚ ğŸ” æœç´¢                                                    â”‚   â”‚
â”‚ ğŸ¥ è§†é¢‘   â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ (156)    â”‚  â”‚ â”‚ æœç´¢æ ‡é¢˜ã€å†…å®¹...                          [ğŸ” æœç´¢]â”‚   â”‚   â”‚
â”‚          â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚ ğŸµ éŸ³é¢‘   â”‚  â”‚                                                             â”‚   â”‚
â”‚ (89)     â”‚  â”‚ åˆ—è¡¨:                                                        â”‚   â”‚
â”‚          â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚ ğŸ“ æ–‡æœ¬   â”‚  â”‚ â”‚ â˜‘ï¸ â”‚ æ¥æº      â”‚ æ ‡é¢˜                â”‚ çŠ¶æ€    â”‚ æ“ä½œ  â”‚â”‚   â”‚
â”‚ (234)    â”‚  â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤â”‚   â”‚
â”‚          â”‚  â”‚ â”‚ â˜  â”‚ ğŸ’¬ å¯¹è¯   â”‚ ä¼šè¯: æ¶æ„è®¾è®¡è®¨è®º   â”‚ âœ… å·²æå–â”‚ [ğŸ‘ï¸] â”‚â”‚   â”‚
â”‚ ğŸ–¼ï¸ å›¾ç‰‡   â”‚  â”‚ â”‚    â”‚           â”‚ 2026-02-08 10:00    â”‚ 3æ¡çŸ¥è¯† â”‚ [âœï¸] â”‚â”‚   â”‚
â”‚ (100)    â”‚  â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤â”‚   â”‚
â”‚          â”‚  â”‚ â”‚ â˜  â”‚ ğŸ“¡ RSS    â”‚ OpenAIå‘å¸ƒGPT-5     â”‚ â³ å¾…å¤„ç†â”‚ [ğŸ‘ï¸] â”‚â”‚   â”‚
â”‚ ğŸ“Š çŠ¶æ€   â”‚  â”‚ â”‚    â”‚ AIç§‘æŠ€æ—¥æŠ¥â”‚ 2026-02-08 09:30    â”‚         â”‚ [â–¶ï¸] â”‚â”‚   â”‚
â”‚          â”‚  â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤â”‚   â”‚
â”‚ â³ å¾…å¤„ç† â”‚  â”‚ â”‚ â˜  â”‚ ğŸ¥ è§†é¢‘   â”‚ meeting_001.mp4    â”‚ âŒ å¤±è´¥ â”‚ [ğŸ‘ï¸] â”‚â”‚   â”‚
â”‚ (200)    â”‚  â”‚ â”‚    â”‚           â”‚ 2026-02-07 15:20    â”‚è½¬å½•å¤±è´¥ â”‚ [ğŸ”„] â”‚â”‚   â”‚
â”‚          â”‚  â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤â”‚   â”‚
â”‚ âœ… å·²æå– â”‚  â”‚ â”‚ â˜  â”‚ ğŸµ éŸ³é¢‘   â”‚ podcast_001.mp3    â”‚ âœ… å·²æå–â”‚ [ğŸ‘ï¸] â”‚â”‚   â”‚
â”‚ (1,300)  â”‚  â”‚ â”‚    â”‚           â”‚ 2026-02-06 08:00    â”‚ 5æ¡çŸ¥è¯† â”‚ [âœï¸] â”‚â”‚   â”‚
â”‚          â”‚  â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚ âŒ å¤±è´¥   â”‚  â”‚                                                             â”‚   â”‚
â”‚ (23)     â”‚  â”‚ åˆ†é¡µ: [1] [2] [3] ... [10]  å…± 76 é¡µ                        â”‚   â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åŸå§‹æ•°æ®è¯¦æƒ…/ç¼–è¾‘å¼¹çª—
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“„ åŸå§‹æ•°æ®è¯¦æƒ… - raw_chat_001                   [Ã—] [âœï¸ ç¼–è¾‘] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  æ¥æºä¿¡æ¯                                                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                                              â”‚
â”‚  æ¥æºç±»å‹: ğŸ’¬ å¯¹è¯                                            â”‚
â”‚  æ¥æºåç§°: ä¼šè¯ #chat_001                                     â”‚
â”‚  ä¼šè¯ID:   chat_001                                          â”‚
â”‚  å¯¼å…¥æ—¶é—´: 2026-02-08 10:00:00                               â”‚
â”‚                                                              â”‚
â”‚  å¤„ç†çŠ¶æ€                                                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                                              â”‚
â”‚  çŠ¶æ€:    âœ… å·²æå– (3æ¡çŸ¥è¯†)                                 â”‚
â”‚  å‘é‡ID:  vec_abc123, vec_def456, vec_ghi789                 â”‚
â”‚  æœ€åæ›´æ–°: 2026-02-08 10:05:00                               â”‚
â”‚                                                              â”‚
â”‚  å†…å®¹é¢„è§ˆ                                                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ ‡é¢˜: ä¼šè¯: ç³»ç»Ÿæ¶æ„è®¨è®º                                â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ å†…å®¹:                                                  â”‚ â”‚
â”‚  â”‚ ç”¨æˆ·: å¦‚ä½•å®ç°æ¨¡å‹è·¯ç”±åˆ‡æ¢ï¼Ÿ                           â”‚ â”‚
â”‚  â”‚ AI: æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°æ¨¡å‹è·¯ç”±...                  â”‚ â”‚
â”‚  â”‚ 1. å…³é”®è¯è·¯ç”±: ä½¿ç”¨@å¤§å“¥/@å°å¼Ÿè§¦å‘                     â”‚ â”‚
â”‚  â”‚ 2. Skillè·¯ç”±: é…ç½®router/v1/SKILL.md                   â”‚ â”‚
â”‚  â”‚ 3. Redisä¼šè¯: æ ¹æ®ä¼šè¯å†å²è‡ªåŠ¨åˆ¤æ–­                     â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ [æŸ¥çœ‹å®Œæ•´å†…å®¹ â†’]                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  æå–çš„çŸ¥è¯†                                                  â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                                              â”‚
â”‚  â€¢ ğŸ“„ ç³»ç»Ÿæ¶æ„è®¾è®¡ (ç›¸ä¼¼åº¦: 0.92)                          â”‚
â”‚  â€¢ ğŸ“„ æ¨¡å‹è·¯ç”±å®ç°æ–¹æ¡ˆ (ç›¸ä¼¼åº¦: 0.88)                      â”‚
â”‚  â€¢ ğŸ“„ Redisä¼šè¯ç®¡ç† (ç›¸ä¼¼åº¦: 0.85)                         â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          [å…³é—­]  [ğŸ”„ é‡æ–°æå–]  [ğŸ—‘ï¸ åˆ é™¤]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### APIè§„èŒƒ

#### GET /proxy/admin/raw-data
è·å–åŸå§‹æ•°æ®åˆ—è¡¨ï¼ˆæ”¯æŒå¤šç»´åº¦ç­›é€‰ï¼‰

**Query Parameters:**
- `page`: é¡µç  (é»˜è®¤1)
- `size`: æ¯é¡µæ•°é‡ (é»˜è®¤20)
- `source_type`: æ¥æºç±»å‹è¿‡æ»¤ (chat|rss|video|audio|text|image)
- `status`: å¤„ç†çŠ¶æ€è¿‡æ»¤ (pending|processing|extracted|failed|archived)
- `search`: å…³é”®è¯æœç´¢ (æ ‡é¢˜ã€å†…å®¹)
- `sort_by`: æ’åºå­—æ®µ (created_at|updated_at|extraction_count)
- `sort_order`: æ’åºæ–¹å‘ (asc|desc)

**Response:**
```json
{
  "total": 1523,
  "page": 1,
  "size": 20,
  "data": [
    {
      "source_id": "raw_chat_001",
      "source_type": "chat",
      "source_category": "å¯¹è¯è®°å½•",
      "title": "ä¼šè¯: ç³»ç»Ÿæ¶æ„è®¨è®º",
      "content_preview": "ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬ç½‘å…³å±‚...",
      "metadata": {
        "source_name": "ä¼šè¯ #chat_001",
        "source_session": "chat_001",
        "imported_at": "2026-02-08T10:00:00Z"
      },
      "processing_status": "extracted",
      "extraction_count": 3,
      "is_edited": false,
      "created_at": "2026-02-08T10:00:00Z"
    }
  ],
  "aggregations": {
    "by_type": {
      "chat": 523,
      "rss": 421,
      "video": 156,
      "audio": 89,
      "text": 234,
      "image": 100
    },
    "by_status": {
      "pending": 200,
      "extracted": 1200,
      "failed": 23
    }
  }
}
```

#### GET /proxy/admin/raw-data/:sourceId
è·å–åŸå§‹æ•°æ®è¯¦æƒ…

#### PUT /proxy/admin/raw-data/:sourceId
ç¼–è¾‘åŸå§‹æ•°æ®

**Request:**
```json
{
  "title": "æ–°æ ‡é¢˜",
  "content": "ç¼–è¾‘åçš„å†…å®¹...",
  "metadata": {
    "source_category": "è‡ªå®šä¹‰åˆ†ç±»"
  }
}
```

#### DELETE /proxy/admin/raw-data/:sourceId
åˆ é™¤åŸå§‹æ•°æ®

#### POST /proxy/admin/raw-data/:sourceId/extract
æ‰‹åŠ¨è§¦å‘çŸ¥è¯†æå–

#### POST /proxy/admin/raw-data/batch
æ‰¹é‡æ“ä½œ

**Request:**
```json
{
  "action": "delete|extract|archive",
  "source_ids": ["raw_001", "raw_002"]
}
```

---

## é…ç½®çº¦æŸ

### config.yml é˜ˆå€¼é…ç½®
```yaml
knowledge:
  threshold:
    extraction: 0.70    # çŸ¥è¯†æå–é˜ˆå€¼
    retrieval: 0.76     # çŸ¥è¯†æ£€ç´¢é˜ˆå€¼
  scheduler:
    cron: "*/30 * * * *"
    enabled: false
  embedding:
    model: BAAI/bge-m3
    base_url: https://api.siliconflow.cn/v1
    api_key: sk-xxxxxxxxxxxxxxxx
```

### é˜ˆå€¼ä¼˜å…ˆçº§è§„åˆ™
```
if skill_has_custom_threshold:
    use skill_threshold        # Skillè‡ªå®šä¹‰é˜ˆå€¼ä¼˜å…ˆ
else:
    use config.yml threshold   # å¦åˆ™ä½¿ç”¨config.ymlé…ç½®
```

### é˜ˆå€¼ä½¿ç”¨åœºæ™¯
| åœºæ™¯ | é˜ˆå€¼æ¥æº | ä½¿ç”¨æ–¹å¼ |
|------|---------|---------|
| **çŸ¥è¯†æå–** | `threshold.extraction` (0.70) | å†…å®¹å‘é‡åŒ–åï¼Œä¸å·²æœ‰çŸ¥è¯†ç›¸ä¼¼åº¦ < 0.70 æ‰å­˜å‚¨ï¼ˆå»é‡ï¼‰ |
| **çŸ¥è¯†æ£€ç´¢** | `threshold.retrieval` (0.76) | RAGæŸ¥è¯¢æ—¶åªè¿”å›ç›¸ä¼¼åº¦ >= 0.76 çš„ç»“æœ |
| **Skillè·¯ç”±** | Skillå†…éƒ¨å®šä¹‰ | å¦‚æœ `./skill/router/v1/SKILL.md` ä¸­å®šä¹‰äº†é˜ˆå€¼ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨Skillé˜ˆå€¼ |
| **ä¸»é¢˜åˆ†ç±»** | `threshold.extraction` (0.70) æˆ– Skillå†…éƒ¨å®šä¹‰ | æ ¹æ®Skillé…ç½®å†³å®š |

---

## ä¸‹ä¸€æ­¥å»ºè®®

å·²å®Œæˆï¼š
- âœ… Phase 2: æ¶æ„è®¾è®¡
- âœ… Phase 3: æ•°æ®åº“Schemaè®¾è®¡
- âœ… Phase 4: APIè¯¦ç»†è§„èŒƒ
- âœ… Phase 5: Skillç³»ç»Ÿæ¥å£è®¾è®¡
- âœ… Phase 6: åŸå§‹æ•°æ®ç®¡ç†æ¨¡å—

å¾…è¿›è¡Œï¼š
- [ ] Phase 7: é¡¹ç›®åˆå§‹åŒ–ï¼ˆç›®å½•ç»“æ„ã€FastAPIã€Vue3ã€Dockerï¼‰
- [ ] Phase 8: å¼€å‘è®¡åˆ’ï¼ˆé‡Œç¨‹ç¢‘ã€ä¼˜å…ˆçº§ã€ä»»åŠ¡æ‹†è§£ï¼‰

---

*å¯¼å‡ºæ—¶é—´: 2026-02-08*  
*æ›´æ–°æ—¶é—´: 2026-02-08 (æ–°å¢åŸå§‹æ•°æ®ç®¡ç†æ¨¡å—)*  
*ä¼šè¯ID: ses_3c504e596ffeNvQiVDfb9WS7uW*
