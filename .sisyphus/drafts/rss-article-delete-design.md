# RSS文章删除功能设计草案

## 需求确认

### 功能需求
1. **文章条目右键删除** - 在红框标记的文章列表区域，每个条目支持右键菜单删除
2. **批量删除功能** - 支持多选文章后批量删除

### 当前页面结构
- 左栏：订阅源列表 (240px) - 已有右键菜单（重命名、立即抓取、删除订阅源）
- 中栏：文章列表 (360px) - 需要新增功能区域
- 右栏：文章阅读区 (自适应)

---

## 设计方案

### 1. 文章条目右键菜单

**触发方式**: 在中栏文章列表的每个条目上右键

**右键菜单项**:
```
┌──────────────┐
│ 📖 标记为已读  │  ← 如果未读才显示
│ 📖 标记为未读  │  ← 如果已读才显示
├──────────────┤
│ 🔗 复制链接    │  ← 复制文章原文链接
├──────────────┤
│ 🗑️ 删除文章    │  ← 危险操作，红色
└──────────────┘
```

**交互细节**:
- 点击删除后弹出确认对话框
- 确认删除后从列表移除该文章，右侧阅读区清空（如果正在阅读该文章）
- 删除成功显示 Toast 提示

---

### 2. 批量删除功能

**界面位置**: 文章列表顶部工具栏

**工具栏改造**:
```
┌─────────────────────────────────────────────┐
│ [搜索框...] [全部▼]     [□ 全选] [🗑️ 批量删除(0)] │
└─────────────────────────────────────────────┘
```

**批量选择机制**:
- 每个文章条目左侧添加复选框
- 勾选文章后，"批量删除"按钮变为可用状态
- 按钮显示已选数量，如"批量删除(3)"

**批量删除交互**:
- 点击"批量删除"按钮弹出确认对话框
- 显示"确定要删除选中的 N 篇文章吗？"
- 确认后批量删除，刷新列表
- 如果当前正在阅读的文章被删除，右侧阅读区清空

---

### 3. 界面布局调整

**文章条目结构改造** (当前 → 新):

当前:
```
┌─────────────────────────────────────────┐
│ ● 文章标题 (未读显示圆点)                │
│    摘要预览文本，最多显示两行...          │
│    少数派 · 2小时前                       │
└─────────────────────────────────────────┘
```

新结构 (带复选框):
```
┌─────────────────────────────────────────┐
│ □  ● 文章标题 (未读显示圆点)              │  ← 左侧添加复选框
│      摘要预览文本，最多显示两行...        │
│      少数派 · 2小时前                     │
└─────────────────────────────────────────┘
```

**选中状态样式**:
- 选中的文章条目背景色加深 (如 #2a2d2e)
- 复选框使用 Element Plus 的 el-checkbox

---

### 4. 技术实现要点

**新增组件**:
- `ArticleContextMenu.vue` - 文章右键菜单组件（类似现有的 FeedContextMenu.vue）

**RSS.vue 修改**:
- 添加 `selectedArticles` 数组存储选中的文章ID
- 添加 `articleContextMenu` 相关状态
- 添加文章右键菜单事件处理
- 添加批量删除方法
- 修改文章条目渲染，添加复选框

**样式调整**:
- 复选框使用深色主题样式
- 选中文章条目高亮显示
- 批量删除按钮默认禁用，有选中项时启用

---

### 5. API 需求

需要后端提供删除文章接口（如果还没有）：
- `DELETE /admin/ai/v1/rss/articles/{article_id}` - 删除单篇文章
- `POST /admin/ai/v1/rss/articles/batch-delete` - 批量删除文章
  - 请求体: `{ article_ids: string[] }`

---

## 待确认问题

1. **删除确认**: 是否需要二次确认对话框？
2. **删除后行为**: 删除当前正在阅读的文章时，右侧阅读区是清空还是自动切换到下一片？
3. **批量删除上限**: 是否需要限制批量删除的最大数量？
4. **快捷键支持**: 是否需要支持 Delete 键删除选中文章？
5. **已选文章保留**: 切换订阅源或筛选条件时，是否保留已选状态？

---

## 组件交互流程

```
用户右键文章条目
    ↓
显示 ArticleContextMenu
    ↓
用户点击"删除文章"
    ↓
显示确认对话框
    ↓
确认 → 调用 API 删除
    ↓
从列表移除该文章
    ↓
如果正在阅读该文章 → 清空阅读区
    ↓
显示成功 Toast
```

```
用户勾选文章复选框
    ↓
添加到 selectedArticles 数组
    ↓
"批量删除"按钮变为可用，显示数量
    ↓
用户点击"批量删除"
    ↓
显示确认对话框（显示选中数量）
    ↓
确认 → 调用批量删除 API
    ↓
刷新文章列表，清空选中状态
    ↓
如果正在阅读的文章被删除 → 清空阅读区
    ↓
显示成功 Toast
```
