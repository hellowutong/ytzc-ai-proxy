{"version":3,"file":"Media-iwppvQ_R.js","sources":["../../src/stores/media.ts","../../src/components/MediaUploadDialog.vue","../../src/components/MediaUrlDialog.vue","../../src/components/MediaList.vue","../../src/views/admin/Media.vue"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref } from 'vue'\nimport type { MediaFile } from '@/types'\n\nexport const useMediaStore = defineStore('media', () => {\n  // State\n  const files = ref<MediaFile[]>([])\n  const loading = ref(false)\n\n  // Actions\n  async function fetchFiles(type?: 'video' | 'audio' | 'text') {\n    loading.value = true\n    try {\n      const url = type \n        ? `/admin/ai/v1/media?type=${type}`\n        : '/admin/ai/v1/media'\n      const response = await fetch(url)\n      const result = await response.json()\n      if (result.code === 200) {\n        files.value = result.data.items\n      }\n    } catch (error) {\n      console.error('Failed to fetch media files:', error)\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function uploadFile(file: File, type: 'video' | 'audio' | 'text', config: Record<string, unknown>) {\n    try {\n      const formData = new FormData()\n      formData.append('file', file)\n      formData.append('type', type)\n      formData.append('config', JSON.stringify(config))\n\n      const response = await fetch('/admin/ai/v1/media/upload', {\n        method: 'POST',\n        body: formData\n      })\n      const result = await response.json()\n      return result.code === 200\n    } catch (error) {\n      console.error('Failed to upload media:', error)\n      return false\n    }\n  }\n\n  async function downloadFromUrl(url: string, type: 'video' | 'audio', config: Record<string, unknown>) {\n    try {\n      const response = await fetch('/admin/ai/v1/media/download', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ url, type, config })\n      })\n      const result = await response.json()\n      return result.code === 200\n    } catch (error) {\n      console.error('Failed to download media:', error)\n      return false\n    }\n  }\n\n  async function deleteFile(id: string) {\n    try {\n      const response = await fetch(`/admin/ai/v1/media/${id}`, {\n        method: 'DELETE'\n      })\n      const result = await response.json()\n      if (result.code === 200) {\n        await fetchFiles()\n        return true\n      }\n      return false\n    } catch (error) {\n      console.error('Failed to delete media:', error)\n      return false\n    }\n  }\n\n  async function reprocessFile(id: string) {\n    try {\n      const response = await fetch(`/admin/ai/v1/media/${id}/reprocess`, {\n        method: 'POST'\n      })\n      const result = await response.json()\n      return result.code === 200\n    } catch (error) {\n      console.error('Failed to reprocess media:', error)\n      return false\n    }\n  }\n\n  return {\n    files,\n    loading,\n    fetchFiles,\n    uploadFile,\n    downloadFromUrl,\n    deleteFile,\n    reprocessFile\n  }\n})\n","<template>\n  <el-dialog\n    v-model=\"visible\"\n    title=\"上传文件\"\n    width=\"500px\"\n  >\n    <el-form :model=\"form\" label-width=\"120px\"\n    >\n      <el-form-item label=\"选择文件\">\n        <el-upload\n          ref=\"uploadRef\"\n          drag\n          action=\"#\"\n          :auto-upload=\"false\"\n          :on-change=\"handleFileChange\"\n          :limit=\"1\"\n          class=\"upload-dragger\"\n        >\n          <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n          <div class=\"el-upload__text\">\n            拖拽文件到此处或 <em>点击上传</em>\n          </div>\n        </el-upload>\n      </el-form-item>\n      \n      <el-form-item label=\"转录处理器\" v-if=\"processors.length > 1\">\n        <el-select v-model=\"form.processor\">\n          <el-option \n            v-for=\"p in processors\" \n            :key=\"p\" \n            :label=\"p\" \n            :value=\"p\"\n          />\n        </el-select>\n      </el-form-item>\n      \n      <el-form-item label=\"模型\" v-if=\"models.length\">\n        <el-select v-model=\"form.model\">\n          <el-option \n            v-for=\"m in models\" \n            :key=\"m\" \n            :label=\"m\" \n            :value=\"m\"\n          />\n        </el-select>\n      </el-form-item>\n      \n      <el-form-item label=\"语言\">\n        <el-select v-model=\"form.language\">\n          <el-option label=\"中文\" value=\"zh\" />\n          <el-option label=\"英文\" value=\"en\" />\n          <el-option label=\"自动检测\" value=\"auto\" />\n        </el-select>\n      </el-form-item>\n      \n      <el-form-item label=\"自动转录\">\n        <el-switch v-model=\"form.auto_process\" />\n      </el-form-item>\n    </el-form>\n\n    <template #footer>\n      <div class=\"dialog-footer\">\n        <el-button @click=\"visible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleUpload\" :disabled=\"!form.file\">开始上传</el-button>\n      </div>\n    </template>\n  </el-dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\nimport { UploadFilled } from '@element-plus/icons-vue'\n\nconst props = defineProps<{\n  modelValue: boolean\n  type: string\n  processors: string[]\n  models: string[]\n}>()\n\nconst emit = defineEmits<{\n  (e: 'update:modelValue', value: boolean): void\n  (e: 'upload', data: { file: File; config: any }): void\n}>()\n\nconst visible = computed({\n  get: () => props.modelValue,\n  set: (val) => emit('update:modelValue', val)\n})\n\nconst form = ref({\n  file: null as File | null,\n  processor: props.processors[0] || 'default',\n  model: props.models[0] || 'base',\n  language: 'zh',\n  auto_process: true\n})\n\nconst handleFileChange = (file: any) => {\n  form.value.file = file.raw\n}\n\nconst handleUpload = () => {\n  if (!form.value.file) return\n  \n  emit('upload', {\n    file: form.value.file,\n    config: {\n      processor: form.value.processor,\n      model: form.value.model,\n      language: form.value.language,\n      auto_process: form.value.auto_process\n    }\n  })\n  \n  // Reset form\n  form.value.file = null\n}\n</script>\n\n<style scoped>\n:deep(.el-dialog) {\n  background: #252526;\n}\n\n:deep(.el-dialog__header) {\n  border-bottom: 1px solid #3C3C3C;\n  margin-right: 0;\n}\n\n:deep(.el-dialog__title) {\n  color: #CCCCCC;\n}\n\n.upload-dragger :deep(.el-upload-dragger) {\n  background: #1E1E1E;\n  border: 2px dashed #3C3C3C;\n}\n\n.upload-dragger :deep(.el-upload-dragger:hover) {\n  border-color: #007ACC;\n}\n\n.upload-dragger :deep(.el-icon--upload) {\n  color: #858585;\n}\n\n.upload-dragger :deep(.el-upload__text) {\n  color: #CCCCCC;\n}\n\n.dialog-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n}\n</style>\n","<template>\n  <el-dialog\n    v-model=\"visible\"\n    title=\"URL下载\"\n    width=\"500px\"\n  >\n    <el-form :model=\"form\" label-width=\"120px\"\n    >\n      <el-form-item label=\"视频URL\" required>\n        <el-input \n          v-model=\"form.url\" \n          placeholder=\"https://example.com/video.mp4\"\n          type=\"textarea\"\n          rows=\"3\"\n        />\n      </el-form-item>\n      \n      <el-form-item label=\"转录处理器\">\n        <el-select v-model=\"form.processor\">\n          <el-option \n            v-for=\"p in processors\" \n            :key=\"p\" \n            :label=\"p\" \n            :value=\"p\"\n          />\n        </el-select>\n      </el-form-item>\n      \n      <el-form-item label=\"模型\">\n        <el-select v-model=\"form.model\">\n          <el-option \n            v-for=\"m in models\" \n            :key=\"m\" \n            :label=\"m\" \n            :value=\"m\"\n          />\n        </el-select>\n      </el-form-item>\n      \n      <el-form-item label=\"语言\">\n        <el-select v-model=\"form.language\">\n          <el-option label=\"中文\" value=\"zh\" />\n          <el-option label=\"英文\" value=\"en\" />\n          <el-option label=\"自动检测\" value=\"auto\" />\n        </el-select>\n      </el-form-item>\n      \n      <el-form-item label=\"自动转录\">\n        <el-switch v-model=\"form.auto_process\" />\n      </el-form-item>\n    </el-form>\n\n    <template #footer>\n      <div class=\"dialog-footer\">\n        <el-button @click=\"visible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleDownload\" :disabled=\"!form.url\">开始下载</el-button>\n      </div>\n    </template>\n  </el-dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\n\nconst props = defineProps<{\n  modelValue: boolean\n  type: string\n  processors: string[]\n  models: string[]\n}>()\n\nconst emit = defineEmits<{\n  (e: 'update:modelValue', value: boolean): void\n  (e: 'download', data: { url: string; config: any }): void\n}>()\n\nconst visible = computed({\n  get: () => props.modelValue,\n  set: (val) => emit('update:modelValue', val)\n})\n\nconst form = ref({\n  url: '',\n  processor: props.processors[0] || 'default',\n  model: props.models[0] || 'base',\n  language: 'zh',\n  auto_process: true\n})\n\nconst handleDownload = () => {\n  if (!form.value.url) return\n  \n  emit('download', {\n    url: form.value.url,\n    config: {\n      processor: form.value.processor,\n      model: form.value.model,\n      language: form.value.language,\n      auto_process: form.value.auto_process\n    }\n  })\n  \n  // Reset form\n  form.value.url = ''\n}\n</script>\n\n<style scoped>\n:deep(.el-dialog) {\n  background: #252526;\n}\n\n:deep(.el-dialog__header) {\n  border-bottom: 1px solid #3C3C3C;\n  margin-right: 0;\n}\n\n:deep(.el-dialog__title) {\n  color: #CCCCCC;\n}\n\n.dialog-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n}\n</style>\n","<template>\n  <div class=\"media-list\">\n    <!-- Toolbar -->\n    <div class=\"toolbar\">\n      <el-button type=\"primary\" @click=\"showUploadDialog = true\">\n        <el-icon><Plus /></el-icon>上传{{ typeLabel }}\n      </el-button>\n      <el-button v-if=\"type !== 'text'\" @click=\"showUrlDialog = true\">\n        <el-icon><Link /></el-icon>URL下载\n      </el-button>\n      <el-input\n        v-model=\"searchQuery\"\n        placeholder=\"搜索文件名\"\n        clearable\n        style=\"width: 240px; margin-left: 12px;\"\n      >\n        <template #prefix>\n          <el-icon><Search /></el-icon>\n        </template>\n      </el-input>\n      <el-select v-model=\"statusFilter\" placeholder=\"状态筛选\" style=\"width: 120px; margin-left: 12px;\">\n        <el-option label=\"全部\" value=\"all\" />\n        <el-option label=\"待处理\" value=\"pending\" />\n        <el-option label=\"处理中\" value=\"processing\" />\n        <el-option label=\"已完成\" value=\"completed\" />\n        <el-option label=\"失败\" value=\"failed\" />\n      </el-select>\n    </div>\n\n    <!-- Media Table -->\n    <el-card class=\"table-card\" v-loading=\"mediaStore.loading\">\n      <el-table :data=\"filteredFiles\" style=\"width: 100%\">\n        <el-table-column prop=\"filename\" label=\"文件名\" width=\"500\" />\n        \n        <el-table-column prop=\"size\" label=\"大小\" width=\"120\">\n          <template #default=\"{ row }\">\n            {{ formatSize(row.size) }}\n          </template>\n        </el-table-column>\n        \n        <el-table-column prop=\"status\" label=\"状态\" width=\"120\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"getStatusType(row.status)\">{{ getStatusText(row.status) }}</el-tag>\n          </template>\n        </el-table-column>\n        \n        <el-table-column label=\"进度\" width=\"200\">\n          <template #default=\"{ row }\">\n            <el-progress \n              :percentage=\"row.progress\" \n              :status=\"row.status === 'failed' ? 'exception' : undefined\"\n            />\n          </template>\n        </el-table-column>\n        \n        <el-table-column prop=\"created_at\" label=\"创建时间\" width=\"180\">\n          <template #default=\"{ row }\">\n            {{ new Date(row.created_at).toLocaleString('zh-CN') }}\n          </template>\n        </el-table-column>\n        \n        <el-table-column label=\"操作\" width=\"200\" fixed=\"right\">\n          <template #default=\"{ row }\">\n            <el-button link type=\"primary\" @click=\"viewFile(row)\">查看</el-button>\n            <el-button link type=\"primary\" @click=\"reprocess(row)\">重新处理</el-button>\n            <el-button link type=\"danger\" @click=\"deleteFile(row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <!-- Upload Dialog -->\n    <MediaUploadDialog\n      v-model=\"showUploadDialog\"\n      :type=\"type\"\n      :processors=\"processors\"\n      :models=\"models\"\n      @upload=\"handleUpload\"\n    />\n\n    <!-- URL Download Dialog -->\n    <MediaUrlDialog\n      v-model=\"showUrlDialog\"\n      :type=\"type\"\n      :processors=\"processors\"\n      :models=\"models\"\n      @download=\"handleUrlDownload\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Plus, Link, Search } from '@element-plus/icons-vue'\nimport { useMediaStore } from '@/stores'\nimport type { MediaFile } from '@/types'\nimport MediaUploadDialog from './MediaUploadDialog.vue'\nimport MediaUrlDialog from './MediaUrlDialog.vue'\n\nconst props = defineProps<{\n  type: 'video' | 'audio' | 'text'\n  processors: string[]\n  models: string[]\n}>()\n\nconst mediaStore = useMediaStore()\n\nconst searchQuery = ref('')\nconst statusFilter = ref('all')\nconst showUploadDialog = ref(false)\nconst showUrlDialog = ref(false)\n\nconst typeLabel = computed(() => {\n  const map = { video: '视频', audio: '音频', text: '文档' }\n  return map[props.type]\n})\n\nconst filteredFiles = computed(() => {\n  let result = mediaStore.files.filter(f => f.type === props.type)\n  \n  if (searchQuery.value) {\n    result = result.filter(f => \n      f.filename.toLowerCase().includes(searchQuery.value.toLowerCase())\n    )\n  }\n  \n  if (statusFilter.value !== 'all') {\n    result = result.filter(f => f.status === statusFilter.value)\n  }\n  \n  return result\n})\n\nconst formatSize = (bytes: number) => {\n  if (bytes === 0) return '0 B'\n  const k = 1024\n  const sizes = ['B', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\nconst getStatusType = (status: string) => {\n  const map: Record<string, string> = {\n    pending: 'info',\n    processing: 'warning',\n    completed: 'success',\n    failed: 'danger'\n  }\n  return map[status] || 'info'\n}\n\nconst getStatusText = (status: string) => {\n  const map: Record<string, string> = {\n    pending: '待处理',\n    processing: '处理中',\n    completed: '已完成',\n    failed: '失败'\n  }\n  return map[status] || status\n}\n\nconst viewFile = (file: MediaFile) => {\n  ElMessage.info(`查看: ${file.filename}`)\n}\n\nconst reprocess = async (file: MediaFile) => {\n  const success = await mediaStore.reprocessFile(file.id)\n  if (success) {\n    ElMessage.success('重新处理任务已提交')\n  } else {\n    ElMessage.error('操作失败')\n  }\n}\n\nconst deleteFile = async (file: MediaFile) => {\n  try {\n    await ElMessageBox.confirm(`确定要删除 \"${file.filename}\" 吗？`, '确认删除')\n    const success = await mediaStore.deleteFile(file.id)\n    if (success) {\n      ElMessage.success('删除成功')\n    } else {\n      ElMessage.error('删除失败')\n    }\n  } catch {\n    // Cancelled\n  }\n}\n\nconst handleUpload = async (data: { file: File; config: any }) => {\n  const success = await mediaStore.uploadFile(data.file, props.type, data.config)\n  if (success) {\n    ElMessage.success('上传成功')\n    showUploadDialog.value = false\n  } else {\n    ElMessage.error('上传失败')\n  }\n}\n\nconst handleUrlDownload = async (data: { url: string; config: any }) => {\n  const success = await mediaStore.downloadFromUrl(data.url, props.type, data.config)\n  if (success) {\n    ElMessage.success('下载任务已提交')\n    showUrlDialog.value = false\n  } else {\n    ElMessage.error('下载失败')\n  }\n}\n\nonMounted(() => {\n  mediaStore.fetchFiles(props.type)\n})\n</script>\n\n<style scoped>\n.media-list {\n  padding: 0;\n}\n\n.toolbar {\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n}\n\n.table-card {\n  background: #252526;\n  border: 1px solid #3C3C3C;\n}\n\n:deep(.el-card__header) {\n  border-bottom: 1px solid #3C3C3C;\n}\n\n:deep(.el-table) {\n  background: transparent;\n}\n\n:deep(.el-table th),\n:deep(.el-table tr) {\n  background: transparent;\n}\n\n:deep(.el-table th.el-table__cell) {\n  color: var(--text-secondary) !important;\n}\n\n/* 统一所有表头单元格背景色，包括固定列 */\n:deep(.el-table .el-table__header-wrapper th.el-table__cell),\n:deep(.el-table .el-table__fixed-header-wrapper th.el-table__cell) {\n  background-color: var(--bg-tertiary) !important;\n}\n\n:deep(.el-table--enable-row-hover .el-table__body tr:hover > td) {\n  background: var(--bg-hover);\n}\n</style>\n","<template>\n  <div class=\"media\">\n    <el-tabs v-model=\"activeTab\" type=\"border-card\" class=\"media-tabs\">\n      <!-- Video Tab -->\n      <el-tab-pane label=\"视频处理\" name=\"video\">\n        <MediaList \n          type=\"video\"\n          :processors=\"['whisper', 'faster_whisper', 'whisper_npu']\"\n          :models=\"['base', 'small', 'medium', 'large']\"\n        />\n      </el-tab-pane>\n\n      <!-- Audio Tab -->\n      <el-tab-pane label=\"音频处理\" name=\"audio\">\n        <MediaList \n          type=\"audio\"\n          :processors=\"['whisper', 'faster_whisper', 'whisper_npu']\"\n          :models=\"['base', 'small', 'medium', 'large']\"\n        />\n      </el-tab-pane>\n\n      <!-- Text Tab -->\n      <el-tab-pane label=\"文档处理\" name=\"text\">\n        <MediaList \n          type=\"text\"\n          :processors=\"['default']\"\n          :models=\"[]\"\n        />\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport MediaList from '@/components/MediaList.vue'\n\nconst activeTab = ref('video')\n</script>\n\n<style scoped>\n.media {\n  padding: 0;\n}\n\n.media-tabs {\n  background: #252526;\n  border: 1px solid #3C3C3C;\n}\n\n:deep(.el-tabs__header) {\n  background: #2D2D30;\n  border-bottom: 1px solid #3C3C3C;\n  margin: 0;\n}\n\n:deep(.el-tabs__item) {\n  color: #858585;\n}\n\n:deep(.el-tabs__item.is-active) {\n  color: #007ACC;\n  background: #252526;\n}\n\n:deep(.el-tabs__content) {\n  padding: 20px;\n}\n</style>\n"],"names":["useMediaStore","defineStore","files","ref","loading","fetchFiles","type","url","result","error","uploadFile","file","config","formData","downloadFromUrl","deleteFile","id","reprocessFile","props","__props","emit","__emit","visible","computed","val","form","handleFileChange","handleUpload","_createBlock","_component_el_dialog","$event","_createElementVNode","_hoisted_1","_createVNode","_component_el_button","_cache","_component_el_form","_component_el_form_item","_component_el_upload","_component_el_icon","_unref","UploadFilled","_component_el_select","_createElementBlock","_Fragment","_renderList","p","_component_el_option","m","_component_el_switch","handleDownload","_component_el_input","mediaStore","searchQuery","statusFilter","showUploadDialog","showUrlDialog","typeLabel","filteredFiles","f","formatSize","bytes","k","sizes","i","getStatusType","status","getStatusText","viewFile","ElMessage","reprocess","ElMessageBox","data","handleUrlDownload","onMounted","_openBlock","_hoisted_2","Plus","_createTextVNode","Link","Search","_component_el_card","_component_el_table","_component_el_table_column","_withCtx","row","_component_el_tag","_component_el_progress","_toDisplayString","_directive_loading","MediaUploadDialog","MediaUrlDialog","activeTab","_component_el_tabs","_component_el_tab_pane","MediaList"],"mappings":"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"}