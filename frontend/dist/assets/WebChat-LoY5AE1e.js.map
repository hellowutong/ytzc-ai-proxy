{"version":3,"file":"WebChat-LoY5AE1e.js","sources":["../../src/views/proxy/WebChat.vue"],"sourcesContent":["<template>\n  <div class=\"webchat\">\n    <!-- Left Sidebar - Conversation History -->\n    <aside class=\"sidebar-left\">\n      <div class=\"sidebar-header\">\n        <el-button type=\"primary\" @click=\"createNewChat\" class=\"new-chat-btn\">\n          <el-icon><Plus /></el-icon>Êñ∞Âª∫ÂØπËØù\n        </el-button>\n      </div>\n      \n      <div class=\"conversation-list\">\n        <div\n          v-for=\"conv in chatStore.conversations\"\n          :key=\"conv.id\"\n          class=\"conversation-item\"\n          :class=\"{ active: chatStore.currentConversation?.id === conv.id }\"\n          @click=\"selectConversation(conv)\"\n        >\n          <div class=\"conv-info\">\n            <div class=\"conv-title\">ÂØπËØù {{ conv.id.slice(0, 8) }}</div>\n            <div class=\"conv-preview\">{{ getPreview(conv) }}</div>\n          </div>\n          <el-button \n            link \n            class=\"delete-btn\" \n            @click.stop=\"deleteConversation(conv)\"\n          >\n            <el-icon><Delete /></el-icon>\n          </el-button>\n        </div>\n      </div>\n      \n      <div class=\"sidebar-footer\">\n        <el-button link @click=\"showSettings = true\">\n          <el-icon><Setting /></el-icon>ËÆæÁΩÆ\n        </el-button>\n      </div>\n    </aside>\n\n    <!-- Main Chat Area -->\n    <div class=\"chat-main\">\n      <!-- Header -->\n      <header class=\"chat-header\">\n        <div class=\"model-selector\">\n          <span>Ê®°Âûã:</span>\n          <el-select v-model=\"selectedModel\" placeholder=\"ÈÄâÊã©Ê®°Âûã\" style=\"width: 160px;\">\n            <el-option \n              v-for=\"model in modelStore.enabledModels\" \n              :key=\"model.name\" \n              :label=\"model.name\" \n              :value=\"model.name\"\n            />\n          </el-select>\n        </div>\n        \n          <div class=\"header-actions\">\n            <el-tag v-if=\"currentModelInfo\">{{ currentModelInfo }}</el-tag>\n            <el-button @click=\"clearChat\">Ê∏ÖÁ©∫ÂØπËØù</el-button>\n            <el-button @click=\"closePage\">ÂÖ≥Èó≠È°µÈù¢</el-button>\n          </div>\n      </header>\n\n      <!-- Messages -->\n      <div class=\"messages-area\" ref=\"messagesContainer\">\n        <div v-if=\"!chatStore.currentConversation?.messages?.length\" class=\"empty-state\">\n          <div class=\"welcome-text\">\n            <h2>üëã Ê¨¢Ëøé‰ΩøÁî® AI Gateway</h2>\n            <p>ÈÄâÊã©‰∏Ä‰∏™Ê®°ÂûãÂºÄÂßãÂØπËØù</p>\n          </div>\n        </div>\n        \n        <template v-else>\n          <div\n            v-for=\"(msg, index) in chatStore.currentConversation.messages\"\n            :key=\"index\"\n            class=\"message\"\n            :class=\"msg.role\"\n          >\n            <div class=\"message-avatar\">\n              {{ msg.role === 'user' ? 'üë§' : 'ü§ñ' }}\n            </div>\n            <div class=\"message-content\">\n              <div class=\"message-bubble\">{{ msg.content }}</div>\n              <div v-if=\"msg.timestamp\" class=\"message-time\">\n                {{ new Date(msg.timestamp).toLocaleTimeString('zh-CN') }}\n              </div>\n            </div>\n          </div>\n          \n          <div v-if=\"chatStore.isStreaming\" class=\"message assistant\">\n            <div class=\"message-avatar\">ü§ñ</div>\n            <div class=\"message-content\">\n              <div class=\"typing-indicator\">\n                <span></span>\n                <span></span>\n                <span></span>\n              </div>\n            </div>\n          </div>\n        </template>\n      </div>\n\n      <!-- Input Area -->\n      <div class=\"input-area\">\n        <div class=\"input-wrapper\">\n          <el-input\n            v-model=\"inputMessage\"\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"ËæìÂÖ•Ê∂àÊÅØ... (Shift+EnterÊç¢Ë°å)\"\n            @keydown.shift.enter.prevent=\"inputMessage += '\\\\n'\"\n            @keydown.enter.exact.prevent=\"sendMessage\"\n            resize=\"none\"\n          />\n          \n          <div class=\"input-actions\">\n            <el-button \n              v-if=\"chatStore.isStreaming\"\n              type=\"danger\" \n              @click=\"stopGeneration\"\n            >\n              <el-icon><VideoPause /></el-icon>ÂÅúÊ≠¢\n            </el-button>\n            <el-button \n              v-else\n              type=\"primary\" \n              :disabled=\"!inputMessage.trim() || !selectedModel\"\n              @click=\"sendMessage\"\n            >\n              <el-icon><Promotion /></el-icon>ÂèëÈÄÅ\n            </el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Settings Drawer -->\n    <el-drawer\n      v-model=\"showSettings\"\n      title=\"‚öôÔ∏è ËÆæÁΩÆ\"\n      direction=\"rtl\"\n      size=\"360px\"\n    >\n      <div class=\"settings-content\">\n        <h4>Ê®°ÂûãÂèÇÊï∞</h4>\n        <el-form label-width=\"120px\">\n          <el-form-item label=\"Temperature\">\n            <el-slider v-model=\"chatStore.settings.temperature\" :min=\"0\" :max=\"2\" :step=\"0.1\" show-input />\n          </el-form-item>\n          \n          <el-form-item label=\"Max Tokens\">\n            <el-input-number v-model=\"chatStore.settings.max_tokens\" :min=\"100\" :max=\"8000\" :step=\"100\" />\n          </el-form-item>\n          \n          <el-form-item label=\"ÊµÅÂºèÂìçÂ∫î\">\n            <el-switch v-model=\"chatStore.settings.stream\" />\n          </el-form-item>\n        </el-form>\n\n        <el-divider />\n\n        <h4>ÂäüËÉΩÂºÄÂÖ≥</h4>\n        <el-form label-width=\"120px\">\n          <el-form-item label=\"Áü•ËØÜÂ∫ìÊ£ÄÁ¥¢\">\n            <el-switch v-model=\"chatStore.settings.knowledge_enabled\" />\n          </el-form-item>\n          \n          <el-form-item label=\"ËÅîÁΩëÊêúÁ¥¢\">\n            <el-switch v-model=\"chatStore.settings.web_search_enabled\" />\n          </el-form-item>\n        </el-form>\n\n        <el-divider />\n\n        <h4>ÊòæÁ§∫ËÆæÁΩÆ</h4>\n        <el-form label-width=\"120px\">\n          <el-form-item label=\"‰ª£Á†ÅÈ´ò‰∫Æ\">\n            <el-switch v-model=\"chatStore.settings.code_highlight\" />\n          </el-form-item>\n          \n          <el-form-item label=\"ÊòæÁ§∫ÊÄùËÄÉËøáÁ®ã\">\n            <el-switch v-model=\"chatStore.settings.show_thinking\" />\n          </el-form-item>\n        </el-form>\n\n        <div class=\"settings-actions\">\n          <el-button type=\"primary\" @click=\"saveSettings\">‰øùÂ≠ò</el-button>\n          <el-button @click=\"resetSettings\">ÈáçÁΩÆ‰∏∫ÈªòËÆ§</el-button>\n        </div>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, nextTick } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ElMessage } from 'element-plus'\nimport { Plus, Delete, Setting, VideoPause, Promotion } from '@element-plus/icons-vue'\nimport { useChatStore, useModelStore } from '@/stores'\nimport type { Conversation } from '@/types'\n\nconst router = useRouter()\nconst chatStore = useChatStore()\nconst modelStore = useModelStore()\n\nconst selectedModel = ref('')\nconst inputMessage = ref('')\nconst showSettings = ref(false)\nconst messagesContainer = ref<HTMLDivElement>()\n\nconst currentModelInfo = computed(() => {\n  if (!selectedModel.value) return null\n  const model = modelStore.models.find(m => m.name === selectedModel.value)\n  if (!model) return null\n  return `${model.current === 'small' ? 'Â∞èÊ®°Âûã' : 'Â§ßÊ®°Âûã'}: ${model[model.current].model}`\n})\n\nconst getPreview = (conv: Conversation) => {\n  const lastMsg = conv.messages?.[conv.messages.length - 1]\n  return lastMsg ? lastMsg.content.slice(0, 30) + '...' : 'Êó†Ê∂àÊÅØ'\n}\n\nconst createNewChat = async () => {\n  if (!selectedModel.value) {\n    ElMessage.warning('ËØ∑ÂÖàÈÄâÊã©Ê®°Âûã')\n    return\n  }\n  await chatStore.createConversation(selectedModel.value)\n  scrollToBottom()\n}\n\nconst selectConversation = async (conv: Conversation) => {\n  // ÈáçÊñ∞Ëé∑ÂèñÂØπËØùËØ¶ÊÉÖÔºàÂåÖÂê´Ê∂àÊÅØÔºâ\n  try {\n    const response = await fetch(`/admin/ai/v1/conversations/${conv.id}`)\n    const result = await response.json()\n    \n    if (result.code === 200) {\n      // Êõ¥Êñ∞ÂØπËØù‰ø°ÊÅØÔºàÂåÖÂê´ÂÆåÊï¥Ê∂àÊÅØÂàóË°®Ôºâ\n      const fullConv = result.data\n      chatStore.setCurrentConversation(fullConv)\n      selectedModel.value = fullConv.model\n      \n      // Êõ¥Êñ∞ÂØπËØùÂàóË°®‰∏≠ÁöÑËØ•ÂØπËØùÔºàÁî®‰∫éÈ¢ÑËßàÊõ¥Êñ∞Ôºâ\n      const index = chatStore.conversations.findIndex(c => c.id === conv.id)\n      if (index !== -1) {\n        chatStore.conversations[index] = { ...chatStore.conversations[index], ...fullConv }\n      }\n    } else {\n      // Â¶ÇÊûúËé∑ÂèñËØ¶ÊÉÖÂ§±Ë¥•Ôºå‰ΩøÁî®ÂàóË°®‰∏≠ÁöÑÂü∫Êú¨‰ø°ÊÅØ\n      chatStore.setCurrentConversation(conv)\n      selectedModel.value = conv.model\n      ElMessage.warning('Ëé∑ÂèñÂØπËØùËØ¶ÊÉÖÂ§±Ë¥•')\n    }\n  } catch (error) {\n    console.error('Failed to fetch conversation details:', error)\n    // Â¶ÇÊûúËØ∑Ê±ÇÂ§±Ë¥•Ôºå‰ΩøÁî®ÂàóË°®‰∏≠ÁöÑÂü∫Êú¨‰ø°ÊÅØ\n    chatStore.setCurrentConversation(conv)\n    selectedModel.value = conv.model\n    ElMessage.error('Ëé∑ÂèñÂØπËØùËØ¶ÊÉÖÂ§±Ë¥•')\n  }\n}\n\nconst deleteConversation = async (conv: Conversation) => {\n  try {\n    const response = await fetch(`/admin/ai/v1/conversations/${conv.id}`, {\n      method: 'DELETE'\n    })\n    const result = await response.json()\n    \n    if (result.code === 200) {\n      // ‰ªéÂâçÁ´ØÂàóË°®‰∏≠ÁßªÈô§\n      chatStore.conversations = chatStore.conversations.filter(c => c.id !== conv.id)\n      // Â¶ÇÊûúÂà†Èô§ÁöÑÊòØÂΩìÂâçÂØπËØùÔºåÊ∏ÖÁ©∫ÂΩìÂâçÂØπËØù\n      if (chatStore.currentConversation?.id === conv.id) {\n        chatStore.currentConversation = null\n      }\n      ElMessage.success('ÂØπËØùÂ∑≤Âà†Èô§')\n    } else {\n      ElMessage.error(result.message || 'Âà†Èô§Â§±Ë¥•')\n    }\n  } catch (error) {\n    console.error('Failed to delete conversation:', error)\n    ElMessage.error('Âà†Èô§Â§±Ë¥•')\n  }\n}\n\nconst sendMessage = async () => {\n  if (!inputMessage.value.trim() || !selectedModel.value) return\n  \n  const message = inputMessage.value\n  inputMessage.value = ''\n  \n  // Â¶ÇÊûúÊ≤°ÊúâÂΩìÂâçÂØπËØùÔºåÂàõÂª∫Êñ∞ÂØπËØù\n  if (!chatStore.currentConversation) {\n    const newConv = await chatStore.createConversation(selectedModel.value)\n    // Ê£ÄÊü•ÂàõÂª∫ÊòØÂê¶ÊàêÂäü\n    if (!newConv || !chatStore.currentConversation) {\n      console.error('ÂàõÂª∫ÂØπËØùÂ§±Ë¥•')\n      ElMessage.error('ÂàõÂª∫ÂØπËØùÂ§±Ë¥•ÔºåËØ∑ÈáçËØï')\n      return\n    }\n  }\n  \n  await chatStore.sendMessage(message, selectedModel.value)\n  scrollToBottom()\n}\n\nconst stopGeneration = () => {\n  chatStore.stopStreaming()\n}\n\nconst clearChat = () => {\n  chatStore.clearCurrentConversation()\n}\n\nconst closePage = () => {\n  // Close the current window/tab and navigate back to main interface\n  if (window.opener) {\n    // If opened as a popup, close it\n    window.close()\n  } else {\n    // For regular tabs, navigate back to main interface\n    router.push('/admin/dashboard')\n  }\n}\n\nconst saveSettings = () => {\n  ElMessage.success('ËÆæÁΩÆÂ∑≤‰øùÂ≠ò')\n  showSettings.value = false\n}\n\nconst resetSettings = () => {\n  chatStore.updateSettings({\n    temperature: 0.7,\n    max_tokens: 2000,\n    stream: true,\n    knowledge_enabled: true,\n    web_search_enabled: false,\n    code_highlight: true,\n    show_thinking: false\n  })\n  ElMessage.success('ËÆæÁΩÆÂ∑≤ÈáçÁΩÆ')\n}\n\nconst scrollToBottom = () => {\n  nextTick(() => {\n    if (messagesContainer.value) {\n      messagesContainer.value.scrollTop = messagesContainer.value.scrollHeight\n    }\n  })\n}\n\nonMounted(async () => {\n  modelStore.fetchModels()\n  await chatStore.fetchConversations()\n  \n  // Â¶ÇÊûúÊúâÂΩìÂâçÂØπËØùÔºå‰ªéÂêéÁ´ØËé∑ÂèñÂÆåÊï¥Ê∂àÊÅØ\n  if (chatStore.currentConversation?.id) {\n    try {\n      const response = await fetch(`/admin/ai/v1/conversations/${chatStore.currentConversation.id}`)\n      const result = await response.json()\n      \n      if (result.code === 200 && result.data) {\n        chatStore.setCurrentConversation(result.data)\n      }\n    } catch (error) {\n      console.error('Âä†ËΩΩÂÆåÊï¥ÂØπËØùÂ§±Ë¥•:', error)\n    }\n  }\n})\n</script>\n\n<style scoped>\n.webchat {\n  display: flex;\n  height: 100vh;\n  background: var(--vscode-bg);\n}\n\n/* Sidebar */\n.sidebar-left {\n  width: 280px;\n  background: var(--vscode-sidebar-bg);\n  border-right: 1px solid var(--vscode-border);\n  display: flex;\n  flex-direction: column;\n}\n\n.sidebar-header {\n  padding: 16px;\n  border-bottom: 1px solid var(--vscode-border);\n}\n\n.new-chat-btn {\n  width: 100%;\n}\n\n.conversation-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n}\n\n.conversation-item {\n  display: flex;\n  align-items: center;\n  padding: 12px;\n  margin-bottom: 4px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.conversation-item:hover {\n  background: #2a2d2e;\n}\n\n.conversation-item.active {\n  background: #264f78;\n  border-left: 3px solid #007acc;\n}\n\n.conv-info {\n  flex: 1;\n  overflow: hidden;\n}\n\n.conv-title {\n  font-weight: 500;\n  color: var(--vscode-text);\n  margin-bottom: 4px;\n}\n\n.conv-preview {\n  font-size: 12px;\n  color: var(--vscode-text-secondary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.delete-btn {\n  opacity: 0;\n  transition: opacity 0.2s;\n  color: var(--vscode-text-secondary);\n}\n\n.conversation-item:hover .delete-btn {\n  opacity: 1;\n}\n\n.sidebar-footer {\n  padding: 16px;\n  border-top: 1px solid var(--vscode-border);\n}\n\n/* Main Chat */\n.chat-main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.chat-header {\n  height: 60px;\n  background: var(--vscode-sidebar-bg);\n  border-bottom: 1px solid var(--vscode-border);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 24px;\n}\n\n.model-selector {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  color: var(--vscode-text);\n}\n\n.header-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n/* Messages */\n.messages-area {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n}\n\n.empty-state {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n\n.welcome-text {\n  text-align: center;\n  color: var(--vscode-text-secondary);\n}\n\n.welcome-text h2 {\n  color: var(--vscode-text);\n  margin-bottom: 8px;\n}\n\n.message {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.message.user {\n  flex-direction: row-reverse;\n}\n\n.message-avatar {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  background: #3c3c3c;\n  flex-shrink: 0;\n}\n\n.message-content {\n  max-width: 70%;\n}\n\n.message-bubble {\n  padding: 12px 16px;\n  border-radius: 12px;\n  background: #3c3c3c;\n  color: var(--vscode-text);\n  line-height: 1.6;\n}\n\n.message.user .message-bubble {\n  background: #007acc;\n}\n\n.message-time {\n  font-size: 11px;\n  color: #858585;\n  margin-top: 4px;\n}\n\n.typing-indicator {\n  display: flex;\n  gap: 4px;\n  padding: 12px 16px;\n  background: #3c3c3c;\n  border-radius: 12px;\n}\n\n.typing-indicator span {\n  width: 8px;\n  height: 8px;\n  background: var(--vscode-text-secondary);\n  border-radius: 50%;\n  animation: typing 1.4s infinite;\n}\n\n.typing-indicator span:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.typing-indicator span:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes typing {\n  0%, 60%, 100% { transform: translateY(0); }\n  30% { transform: translateY(-10px); }\n}\n\n/* Input */\n.input-area {\n  padding: 16px 24px;\n  background: var(--vscode-sidebar-bg);\n  border-top: 1px solid var(--vscode-border);\n}\n\n.input-wrapper {\n  position: relative;\n}\n\n.input-actions {\n  position: absolute;\n  right: 8px;\n  bottom: 8px;\n}\n\n/* Settings */\n.settings-content {\n  padding: 0;\n}\n\n.settings-content h4 {\n  color: var(--vscode-text);\n  margin: 20px 0 16px;\n}\n\n.settings-actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 24px;\n  padding-top: 20px;\n  border-top: 1px solid var(--vscode-border);\n}\n\n:deep(.el-drawer) {\n  background: var(--vscode-sidebar-bg);\n}\n\n:deep(.el-drawer__header) {\n  color: var(--vscode-text);\n  border-bottom: 1px solid var(--vscode-border);\n  margin-bottom: 0;\n  padding: 20px;\n}\n\n:deep(.el-drawer__body) {\n  padding: 0 20px 20px;\n}\n\n/* Override Element Plus components */\n:deep(.el-textarea__inner) {\n  background-color: var(--vscode-input-bg);\n  border-color: var(--vscode-input-border);\n  color: var(--vscode-text);\n}\n\n:deep(.el-textarea__inner:focus) {\n  border-color: var(--vscode-blue);\n}\n\n:deep(.el-select .el-input__wrapper) {\n  background-color: var(--vscode-input-bg);\n  box-shadow: 0 0 0 1px var(--vscode-input-border);\n}\n\n:deep(.el-select .el-input__inner) {\n  color: var(--vscode-text);\n}\n</style>\n"],"names":["router","useRouter","chatStore","useChatStore","modelStore","useModelStore","selectedModel","ref","inputMessage","showSettings","messagesContainer","currentModelInfo","computed","model","m","getPreview","conv","lastMsg","_a","createNewChat","ElMessage","scrollToBottom","selectConversation","result","fullConv","index","c","error","deleteConversation","sendMessage","message","stopGeneration","clearChat","closePage","saveSettings","resetSettings","nextTick","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_el_button","_component_el_icon","_unref","Plus","_hoisted_4","_Fragment","_renderList","_normalizeClass","$event","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","_withModifiers","Delete","_hoisted_9","Setting","_hoisted_10","_hoisted_11","_hoisted_12","_cache","_component_el_select","_createBlock","_component_el_option","_hoisted_13","_component_el_tag","msg","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_14","_hoisted_20","_hoisted_21","_component_el_input","_hoisted_22","VideoPause","Promotion","_component_el_drawer","_hoisted_23","_component_el_form","_component_el_form_item","_component_el_slider","_component_el_input_number","_component_el_switch","_component_el_divider","_hoisted_24"],"mappings":"0/BA0MA,MAAMA,EAASC,GAAA,EACTC,EAAYC,GAAA,EACZC,EAAaC,GAAA,EAEbC,EAAgBC,EAAI,EAAE,EACtBC,EAAeD,EAAI,EAAE,EACrBE,EAAeF,EAAI,EAAK,EACxBG,EAAoBH,EAAA,EAEpBI,EAAmBC,GAAS,IAAM,CACtC,GAAI,CAACN,EAAc,MAAO,OAAO,KACjC,MAAMO,EAAQT,EAAW,OAAO,QAAUU,EAAE,OAASR,EAAc,KAAK,EACxE,OAAKO,EACE,GAAGA,EAAM,UAAY,QAAU,MAAQ,KAAK,KAAKA,EAAMA,EAAM,OAAO,EAAE,KAAK,GAD/D,IAErB,CAAC,EAEKE,EAAcC,GAAuB,OACzC,MAAMC,GAAUC,EAAAF,EAAK,WAAL,YAAAE,EAAgBF,EAAK,SAAS,OAAS,GACvD,OAAOC,EAAUA,EAAQ,QAAQ,MAAM,EAAG,EAAE,EAAI,MAAQ,KAC1D,EAEME,EAAgB,SAAY,CAChC,GAAI,CAACb,EAAc,MAAO,CACxBc,EAAU,QAAQ,QAAQ,EAC1B,MACF,CACA,MAAMlB,EAAU,mBAAmBI,EAAc,KAAK,EACtDe,EAAA,CACF,EAEMC,EAAqB,MAAON,GAAuB,CAEvD,GAAI,CAEF,MAAMO,EAAS,MADE,MAAM,MAAM,8BAA8BP,EAAK,EAAE,EAAE,GACtC,KAAA,EAE9B,GAAIO,EAAO,OAAS,IAAK,CAEvB,MAAMC,EAAWD,EAAO,KACxBrB,EAAU,uBAAuBsB,CAAQ,EACzClB,EAAc,MAAQkB,EAAS,MAG/B,MAAMC,EAAQvB,EAAU,cAAc,aAAewB,EAAE,KAAOV,EAAK,EAAE,EACjES,IAAU,KACZvB,EAAU,cAAcuB,CAAK,EAAI,CAAE,GAAGvB,EAAU,cAAcuB,CAAK,EAAG,GAAGD,CAAA,EAE7E,MAEEtB,EAAU,uBAAuBc,CAAI,EACrCV,EAAc,MAAQU,EAAK,MAC3BI,EAAU,QAAQ,UAAU,CAEhC,OAASO,EAAO,CACd,QAAQ,MAAM,wCAAyCA,CAAK,EAE5DzB,EAAU,uBAAuBc,CAAI,EACrCV,EAAc,MAAQU,EAAK,MAC3BI,EAAU,MAAM,UAAU,CAC5B,CACF,EAEMQ,EAAqB,MAAOZ,GAAuB,OACvD,GAAI,CAIF,MAAMO,EAAS,MAHE,MAAM,MAAM,8BAA8BP,EAAK,EAAE,GAAI,CACpE,OAAQ,QAAA,CACT,GAC6B,KAAA,EAE1BO,EAAO,OAAS,KAElBrB,EAAU,cAAgBA,EAAU,cAAc,UAAYwB,EAAE,KAAOV,EAAK,EAAE,IAE1EE,EAAAhB,EAAU,sBAAV,YAAAgB,EAA+B,MAAOF,EAAK,KAC7Cd,EAAU,oBAAsB,MAElCkB,EAAU,QAAQ,OAAO,GAEzBA,EAAU,MAAMG,EAAO,SAAW,MAAM,CAE5C,OAASI,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,EACrDP,EAAU,MAAM,MAAM,CACxB,CACF,EAEMS,EAAc,SAAY,CAC9B,GAAI,CAACrB,EAAa,MAAM,QAAU,CAACF,EAAc,MAAO,OAExD,MAAMwB,EAAUtB,EAAa,MAI7B,GAHAA,EAAa,MAAQ,GAGjB,CAACN,EAAU,sBAGT,CAFY,MAAMA,EAAU,mBAAmBI,EAAc,KAAK,GAEtD,CAACJ,EAAU,qBAAqB,CAC9C,QAAQ,MAAM,QAAQ,EACtBkB,EAAU,MAAM,YAAY,EAC5B,MACF,CAGF,MAAMlB,EAAU,YAAY4B,EAASxB,EAAc,KAAK,EACxDe,EAAA,CACF,EAEMU,EAAiB,IAAM,CAC3B7B,EAAU,cAAA,CACZ,EAEM8B,EAAY,IAAM,CACtB9B,EAAU,yBAAA,CACZ,EAEM+B,EAAY,IAAM,CAElB,OAAO,OAET,OAAO,MAAA,EAGPjC,EAAO,KAAK,kBAAkB,CAElC,EAEMkC,EAAe,IAAM,CACzBd,EAAU,QAAQ,OAAO,EACzBX,EAAa,MAAQ,EACvB,EAEM0B,EAAgB,IAAM,CAC1BjC,EAAU,eAAe,CACvB,YAAa,GACb,WAAY,IACZ,OAAQ,GACR,kBAAmB,GACnB,mBAAoB,GACpB,eAAgB,GAChB,cAAe,EAAA,CAChB,EACDkB,EAAU,QAAQ,OAAO,CAC3B,EAEMC,EAAiB,IAAM,CAC3Be,GAAS,IAAM,CACT1B,EAAkB,QACpBA,EAAkB,MAAM,UAAYA,EAAkB,MAAM,aAEhE,CAAC,CACH,EAEA,OAAA2B,GAAU,SAAY,OAKpB,GAJAjC,EAAW,YAAA,EACX,MAAMF,EAAU,mBAAA,GAGZgB,EAAAhB,EAAU,sBAAV,MAAAgB,EAA+B,GACjC,GAAI,CAEF,MAAMK,EAAS,MADE,MAAM,MAAM,8BAA8BrB,EAAU,oBAAoB,EAAE,EAAE,GAC/D,KAAA,EAE1BqB,EAAO,OAAS,KAAOA,EAAO,MAChCrB,EAAU,uBAAuBqB,EAAO,IAAI,CAEhD,OAASI,EAAO,CACd,QAAQ,MAAM,YAAaA,CAAK,CAClC,CAEJ,CAAC,yPAlXC,OAAAW,EAAA,EAAAC,EA8LM,MA9LNC,GA8LM,CA5LJC,EAkCQ,QAlCRC,GAkCQ,CAjCND,EAIM,MAJNE,GAIM,CAHJC,EAEYC,EAAA,CAFD,KAAK,UAAW,QAAO1B,EAAe,MAAM,cAAA,aACrD,IAA2B,CAA3ByB,EAA2BE,EAAA,KAAA,WAAlB,IAAQ,CAARF,EAAQG,EAAAC,EAAA,CAAA,CAAA,yBAAU,QAC7B,EAAA,EAAA,WAGFP,EAoBM,MApBNQ,GAoBM,EAnBJX,EAAA,EAAA,EAAAC,EAkBMW,EAAA,KAAAC,EAjBWJ,EAAA7C,CAAA,EAAU,cAAlBc,GAAI,kBADbuB,EAkBM,MAAA,CAhBH,IAAKvB,EAAK,GACX,MAAKoC,EAAA,CAAC,oBAAmB,CAAA,SACPL,EAAAA,EAAA7C,CAAA,EAAU,sBAAV6C,YAAAA,EAA+B,MAAO/B,EAAK,EAAA,CAAE,CAAA,EAC9D,QAAKqC,IAAE/B,EAAmBN,CAAI,CAAA,GAE/ByB,EAGM,MAHNa,GAGM,CAFJb,EAA0D,MAA1Dc,GAAwB,QAAMvC,EAAK,GAAG,MAAK,EAAA,CAAA,CAAA,EAAA,CAAA,EAC3CyB,EAAsD,MAAtDe,GAAsDC,EAAzB1C,EAAWC,CAAI,CAAA,EAAA,CAAA,CAAA,GAE9C4B,EAMYC,EAAA,CALV,KAAA,GACA,MAAM,aACL,QAAKa,EAAAL,IAAOzB,EAAmBZ,CAAI,EAAA,CAAA,MAAA,CAAA,CAAA,aAEpC,IAA6B,CAA7B4B,EAA6BE,EAAA,KAAA,WAApB,IAAU,CAAVF,EAAUG,EAAAY,EAAA,CAAA,CAAA,iDAKzBlB,EAIM,MAJNmB,GAIM,CAHJhB,EAEYC,EAAA,CAFD,KAAA,GAAM,uBAAOpC,EAAA,MAAY,GAAA,aAClC,IAA8B,CAA9BmC,EAA8BE,EAAA,KAAA,WAArB,IAAW,CAAXF,EAAWG,EAAAc,EAAA,CAAA,CAAA,yBAAU,MAChC,EAAA,EAAA,aAKJpB,EA8FM,MA9FNqB,GA8FM,CA5FJrB,EAkBS,SAlBTsB,GAkBS,CAjBPtB,EAUM,MAVNuB,GAUM,CATJC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAxB,EAAgB,YAAV,MAAG,EAAA,GACTG,EAOYsB,EAAA,YAPQ5D,EAAA,2CAAAA,EAAa,MAAA+C,GAAE,YAAY,OAAO,MAAA,CAAA,MAAA,OAAA,CAAA,aAElD,IAAyC,EAD3Cf,EAAA,EAAA,EAAAC,EAKEW,EAAA,KAAAC,EAJgBJ,EAAA3C,CAAA,EAAW,cAApBS,QADTsD,EAKEC,EAAA,CAHC,IAAKvD,EAAM,KACX,MAAOA,EAAM,KACb,MAAOA,EAAM,IAAA,+DAKlB4B,EAIM,MAJN4B,GAIM,CAHU1D,EAAA,WAAdwD,EAA+DG,EAAA,CAAA,IAAA,GAAA,WAA/B,IAAsB,KAAnB3D,EAAA,KAAgB,EAAA,CAAA,CAAA,mBACnDiC,EAA8CC,EAAA,CAAlC,QAAOb,GAAS,WAAE,IAAI,CAAA,GAAAiC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,GAAJ,OAAI,EAAA,CAAA,WAClCrB,EAA8CC,EAAA,CAAlC,QAAOZ,GAAS,WAAE,IAAI,CAAA,GAAAgC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,GAAJ,OAAI,EAAA,CAAA,eAKxCxB,EAqCM,MAAA,CArCD,MAAM,wBAAoB,oBAAJ,IAAI/B,CAAA,IACjBqC,GAAAA,EAAAA,EAAA7C,CAAA,EAAU,sBAAV6C,YAAAA,EAA+B,WAA/BA,MAAAA,EAAyC,YAOrDR,EA4BWW,EAAA,CAAA,IAAA,GAAA,QA3BTX,EAeMW,EAAA,KAAAC,EAdmBJ,KAAU,oBAAoB,SAAQ,CAArDwB,EAAK9C,SADfc,EAeM,MAAA,CAbH,IAAKd,EACN,MAAK2B,EAAA,CAAC,UACEmB,EAAI,IAAI,CAAA,CAAA,GAEhB9B,EAEM,MAFN+B,GAEMf,EADDc,EAAI,OAAI,OAAA,KAAA,IAAA,EAAA,CAAA,EAEb9B,EAKM,MALNgC,GAKM,CAJJhC,EAAmD,MAAnDiC,GAAmDjB,EAApBc,EAAI,OAAO,EAAA,CAAA,EAC/BA,EAAI,eAAfhC,EAEM,MAFNoC,GAEMlB,EAAA,IADG,KAAKc,EAAI,SAAS,EAAE,mBAAkB,OAAA,CAAA,EAAA,CAAA,0BAKxCxB,EAAA7C,CAAA,EAAU,aAArBoC,EAAA,EAAAC,EASM,MATNqC,GASM,CAAA,GAAAX,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CARJxB,EAAoC,MAAA,CAA/B,MAAM,gBAAA,EAAiB,KAAE,EAAA,EAC9BA,EAMM,MAAA,CAND,MAAM,mBAAiB,CAC1BA,EAIM,MAAA,CAJD,MAAM,oBAAkB,CAC3BA,EAAa,MAAA,EACbA,EAAa,MAAA,EACbA,EAAa,MAAA,CAAA,6BA/BrBH,IAAAC,EAKM,MALNsC,GAKM,CAAA,GAAAZ,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAJJxB,EAGM,MAAA,CAHD,MAAM,gBAAc,CACvBA,EAA2B,UAAvB,oBAAkB,EACtBA,EAAiB,SAAd,YAAU,CAAA,iBAoCnBA,EA8BM,MA9BNqC,GA8BM,CA7BJrC,EA4BM,MA5BNsC,GA4BM,CA3BJnC,EAQEoC,EAAA,YAPSxE,EAAA,2CAAAA,EAAY,MAAA6C,GACrB,KAAK,WACJ,KAAM,EACP,YAAY,0BACX,UAAO,oBAAsB7C,EAAA,OAAY,MAAA,CAAA,QAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA,OACZqB,EAAW,CAAA,QAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA,CAAA,EACzC,OAAO,MAAA,qCAGTY,EAgBM,MAhBNwC,GAgBM,CAdIlC,EAAA7C,CAAA,EAAU,iBADlBiE,EAMYtB,EAAA,OAJV,KAAK,SACJ,QAAOd,CAAA,aAER,IAAiC,CAAjCa,EAAiCE,EAAA,KAAA,WAAxB,IAAc,CAAdF,EAAcG,EAAAmC,EAAA,CAAA,CAAA,yBAAU,MACnC,EAAA,EAAA,eACAf,EAOYtB,EAAA,OALV,KAAK,UACJ,SAAQ,CAAGrC,EAAA,MAAa,KAAA,IAAWF,EAAA,MACnC,QAAOuB,CAAA,aAER,IAAgC,CAAhCe,EAAgCE,EAAA,KAAA,WAAvB,IAAa,CAAbF,EAAaG,EAAAoC,EAAA,CAAA,CAAA,yBAAU,MAClC,EAAA,EAAA,iCAORvC,EAqDYwC,GAAA,YApDD3E,EAAA,6CAAAA,EAAY,MAAA4C,GACrB,MAAM,QACN,UAAU,MACV,KAAK,OAAA,aAEL,IA8CM,CA9CNZ,EA8CM,MA9CN4C,GA8CM,CA7CJpB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAxB,EAAa,UAAT,OAAI,EAAA,GACRG,EAYU0C,EAAA,CAZD,cAAY,SAAO,WAC1B,IAEe,CAFf1C,EAEe2C,EAAA,CAFD,MAAM,eAAa,WAC/B,IAA+F,CAA/F3C,EAA+F4C,EAAA,YAA3EzC,EAAA7C,CAAA,EAAU,SAAS,iDAAnB6C,EAAA7C,CAAA,EAAU,SAAS,YAAWmD,GAAG,IAAK,EAAI,IAAK,EAAI,KAAM,GAAK,aAAA,EAAA,iCAGpFT,EAEe2C,EAAA,CAFD,MAAM,cAAY,WAC9B,IAA8F,CAA9F3C,EAA8F6C,GAAA,YAApE1C,EAAA7C,CAAA,EAAU,SAAS,gDAAnB6C,EAAA7C,CAAA,EAAU,SAAS,WAAUmD,GAAG,IAAK,IAAM,IAAK,IAAO,KAAM,GAAA,iCAGzFT,EAEe2C,EAAA,CAFD,MAAM,QAAM,WACxB,IAAiD,CAAjD3C,EAAiD8C,EAAA,YAA7B3C,EAAA7C,CAAA,EAAU,SAAS,4CAAnB6C,EAAA7C,CAAA,EAAU,SAAS,OAAMmD,EAAA,yCAIjDT,EAAc+C,CAAA,EAEd1B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAxB,EAAa,UAAT,OAAI,EAAA,GACRG,EAQU0C,EAAA,CARD,cAAY,SAAO,WAC1B,IAEe,CAFf1C,EAEe2C,EAAA,CAFD,MAAM,SAAO,WACzB,IAA4D,CAA5D3C,EAA4D8C,EAAA,YAAxC3C,EAAA7C,CAAA,EAAU,SAAS,uDAAnB6C,EAAA7C,CAAA,EAAU,SAAS,kBAAiBmD,EAAA,iCAG1DT,EAEe2C,EAAA,CAFD,MAAM,QAAM,WACxB,IAA6D,CAA7D3C,EAA6D8C,EAAA,YAAzC3C,EAAA7C,CAAA,EAAU,SAAS,wDAAnB6C,EAAA7C,CAAA,EAAU,SAAS,mBAAkBmD,EAAA,yCAI7DT,EAAc+C,CAAA,EAEd1B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAxB,EAAa,UAAT,OAAI,EAAA,GACRG,EAQU0C,EAAA,CARD,cAAY,SAAO,WAC1B,IAEe,CAFf1C,EAEe2C,EAAA,CAFD,MAAM,QAAM,WACxB,IAAyD,CAAzD3C,EAAyD8C,EAAA,YAArC3C,EAAA7C,CAAA,EAAU,SAAS,oDAAnB6C,EAAA7C,CAAA,EAAU,SAAS,eAAcmD,EAAA,iCAGvDT,EAEe2C,EAAA,CAFD,MAAM,UAAQ,WAC1B,IAAwD,CAAxD3C,EAAwD8C,EAAA,YAApC3C,EAAA7C,CAAA,EAAU,SAAS,qDAAnB6C,EAAA7C,CAAA,EAAU,SAAS,cAAamD,EAAA,yCAIxDZ,EAGM,MAHNmD,GAGM,CAFJhD,EAA8DC,EAAA,CAAnD,KAAK,UAAW,QAAOX,CAAA,aAAc,IAAE,CAAA,GAAA+B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,GAAF,KAAE,EAAA,CAAA,WAClDrB,EAAmDC,EAAA,CAAvC,QAAOV,GAAa,WAAE,IAAK,CAAA,GAAA8B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,GAAL,QAAK,EAAA,CAAA"}