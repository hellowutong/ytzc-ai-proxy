{"version":3,"file":"models-CjJxZ9ep.js","sources":["../../src/stores/models.ts"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\nimport type { VirtualModel, ModelConfig, KnowledgeConfig, WebSearchConfig } from '@/types'\n\nexport const useModelStore = defineStore('models', () => {\n  // State\n  const models = ref<VirtualModel[]>([])\n  const currentModel = ref<VirtualModel | null>(null)\n  const loading = ref(false)\n\n  // Getters\n  const enabledModels = computed(() => models.value.filter(m => m.use))\n  const modelNames = computed(() => models.value.map(m => m.name))\n\n  // Actions\n  async function fetchModels() {\n    loading.value = true\n    try {\n      const response = await fetch('/admin/ai/v1/virtual-models')\n      const result = await response.json()\n      if (result.code === 200) {\n        models.value = result.data\n      }\n    } catch (error) {\n      console.error('Failed to fetch models:', error)\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function createModel(model: Omit<VirtualModel, 'proxy_key'>) {\n    try {\n      const response = await fetch('/admin/ai/v1/virtual-models', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(model)\n      })\n      const result = await response.json()\n      if (result.code === 200) {\n        await fetchModels()\n        return true\n      }\n      return false\n    } catch (error) {\n      console.error('Failed to create model:', error)\n      return false\n    }\n  }\n\n  async function updateModel(name: string, model: Partial<VirtualModel>) {\n    try {\n      const response = await fetch(`/admin/ai/v1/virtual-models/${name}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(model)\n      })\n      const result = await response.json()\n      if (result.code === 200) {\n        await fetchModels()\n        return true\n      }\n      return false\n    } catch (error) {\n      console.error('Failed to update model:', error)\n      return false\n    }\n  }\n\n  async function deleteModel(name: string) {\n    try {\n      const response = await fetch(`/admin/ai/v1/virtual-models/${name}`, {\n        method: 'DELETE'\n      })\n      const result = await response.json()\n      if (result.code === 200) {\n        await fetchModels()\n        return true\n      }\n      return false\n    } catch (error) {\n      console.error('Failed to delete model:', error)\n      return false\n    }\n  }\n\n  async function switchModel(name: string, size: 'small' | 'big') {\n    try {\n      const response = await fetch(`/admin/ai/v1/virtual-models/${name}/switch`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ target: size })\n      })\n      const result = await response.json()\n      if (result.code === 200) {\n        await fetchModels()\n        return true\n      }\n      return false\n    } catch (error) {\n      console.error('Failed to switch model:', error)\n      return false\n    }\n  }\n\n  function setCurrentModel(model: VirtualModel) {\n    currentModel.value = model\n  }\n\n  return {\n    models,\n    currentModel,\n    loading,\n    enabledModels,\n    modelNames,\n    fetchModels,\n    createModel,\n    updateModel,\n    deleteModel,\n    switchModel,\n    setCurrentModel\n  }\n})\n"],"names":["useModelStore","defineStore","models","ref","currentModel","loading","enabledModels","computed","m","modelNames","fetchModels","result","error","createModel","model","updateModel","name","deleteModel","switchModel","size","setCurrentModel"],"mappings":"sDAIO,MAAMA,EAAgBC,EAAY,SAAU,IAAM,CAEvD,MAAMC,EAASC,EAAoB,EAAE,EAC/BC,EAAeD,EAAyB,IAAI,EAC5CE,EAAUF,EAAI,EAAK,EAGnBG,EAAgBC,EAAS,IAAML,EAAO,MAAM,OAAOM,GAAKA,EAAE,GAAG,CAAC,EAC9DC,EAAaF,EAAS,IAAML,EAAO,MAAM,IAAIM,GAAKA,EAAE,IAAI,CAAC,EAG/D,eAAeE,GAAc,CAC3BL,EAAQ,MAAQ,GAChB,GAAI,CAEF,MAAMM,EAAS,MADE,MAAM,MAAM,6BAA6B,GAC5B,KAAA,EAC1BA,EAAO,OAAS,MAClBT,EAAO,MAAQS,EAAO,KAE1B,OAASC,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,CAChD,QAAA,CACEP,EAAQ,MAAQ,EAClB,CACF,CAEA,eAAeQ,EAAYC,EAAwC,CACjE,GAAI,CAOF,OADe,MALE,MAAM,MAAM,8BAA+B,CAC1D,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAUA,CAAK,CAAA,CAC3B,GAC6B,KAAA,GACnB,OAAS,KAClB,MAAMJ,EAAA,EACC,IAEF,EACT,OAASE,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EACvC,EACT,CACF,CAEA,eAAeG,EAAYC,EAAcF,EAA8B,CACrE,GAAI,CAOF,OADe,MALE,MAAM,MAAM,+BAA+BE,CAAI,GAAI,CAClE,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAUF,CAAK,CAAA,CAC3B,GAC6B,KAAA,GACnB,OAAS,KAClB,MAAMJ,EAAA,EACC,IAEF,EACT,OAASE,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EACvC,EACT,CACF,CAEA,eAAeK,EAAYD,EAAc,CACvC,GAAI,CAKF,OADe,MAHE,MAAM,MAAM,+BAA+BA,CAAI,GAAI,CAClE,OAAQ,QAAA,CACT,GAC6B,KAAA,GACnB,OAAS,KAClB,MAAMN,EAAA,EACC,IAEF,EACT,OAASE,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EACvC,EACT,CACF,CAEA,eAAeM,EAAYF,EAAcG,EAAuB,CAC9D,GAAI,CAOF,OADe,MALE,MAAM,MAAM,+BAA+BH,CAAI,UAAW,CACzE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CAAE,OAAQG,EAAM,CAAA,CACtC,GAC6B,KAAA,GACnB,OAAS,KAClB,MAAMT,EAAA,EACC,IAEF,EACT,OAASE,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EACvC,EACT,CACF,CAEA,SAASQ,EAAgBN,EAAqB,CAC5CV,EAAa,MAAQU,CACvB,CAEA,MAAO,CACL,OAAAZ,EACA,aAAAE,EACA,QAAAC,EACA,cAAAC,EACA,WAAAG,EACA,YAAAC,EACA,YAAAG,EACA,YAAAE,EACA,YAAAE,EACA,YAAAC,EACA,gBAAAE,CAAA,CAEJ,CAAC"}