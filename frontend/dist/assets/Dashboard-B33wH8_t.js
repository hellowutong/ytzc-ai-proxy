import{A as H,i as y,d as J,o as K,c as C,b as e,w as s,k as p,l as h,F as L,r as $,a as n,e as E,B as q,C as x,t as _,u as c,D as Q,G as U,H as W,I as X,J as Y,K as R,q as Z,n as r,f as ee,L as N,M as se,N as te,v as ae,O as ne,j as oe,E as m,P as le,m as ie,_ as de}from"./index-DgeW9NR8.js";const ce=H("dashboard",()=>{const F=y({virtual_models:0,today_conversations:0,knowledge_docs:0,media_queue:0,rss_feeds:0,system_status:"healthy"}),u=y([]),l=y([]),g=y(!1);async function k(){g.value=!0;try{const i=await(await fetch("/admin/ai/v1/dashboard/stats")).json();i.code===200&&(F.value=i.data)}catch(o){console.error("Failed to fetch stats:",o)}finally{g.value=!1}}async function A(){try{const i=await(await fetch("/admin/ai/v1/dashboard/activities")).json();i.code===200&&(u.value=i.data)}catch(o){console.error("Failed to fetch activities:",o)}}async function B(){try{const i=await(await fetch("/admin/ai/v1/dashboard/dependencies")).json();i.code===200&&(l.value=i.data)}catch(o){console.error("Failed to fetch dependencies status:",o)}}async function T(){try{return(await(await fetch("/admin/ai/v1/config/reload",{method:"POST"})).json()).code===200}catch(o){return console.error("Failed to reload config:",o),!1}}async function j(){try{return(await(await fetch("/admin/ai/v1/skills/reload",{method:"POST"})).json()).code===200}catch(o){return console.error("Failed to reload skills:",o),!1}}return{stats:F,activities:u,dependencies:l,loading:g,fetchStats:k,fetchActivities:A,fetchDependenciesStatus:B,reloadConfig:T,reloadSkills:j}}),re={class:"dashboard vscode-theme"},ue={class:"stat-content"},fe={class:"stat-value"},_e={class:"stat-label"},pe={class:"card-header"},he={class:"card-title"},me={class:"deps-grid"},ge={class:"dep-header"},ve={class:"dep-status"},ye={class:"dep-info"},ke={class:"dep-name"},we={class:"dep-detail"},Ce={key:0,class:"dep-latency"},be={class:"quick-actions"},Se={class:"card-header"},De=J({__name:"Dashboard",setup(F){const u=ie(),l=ce(),g=y(!1),k=y(!1),A=oe(()=>l.dependencies),B=async()=>{m.info("正在刷新依赖状态..."),await l.fetchDependenciesStatus(),m.success("依赖状态已刷新")},T=[{key:"virtual_models",label:"虚拟模型",icon:Q,gradient:"linear-gradient(135deg, #007ACC 0%, #1E90FF 100%)",onClick:()=>u.push("/admin/models")},{key:"today_conversations",label:"今日对话",icon:U,gradient:"linear-gradient(135deg, #E06C75 0%, #FF6B6B 100%)",onClick:()=>u.push("/admin/conversations")},{key:"knowledge_docs",label:"知识库文档",icon:W,gradient:"linear-gradient(135deg, #98C379 0%, #7CB342 100%)",onClick:()=>u.push("/admin/knowledge")},{key:"media_queue",label:"媒体队列",icon:X,gradient:"linear-gradient(135deg, #61AFEF 0%, #42A5F5 100%)",onClick:()=>u.push("/admin/media")},{key:"rss_feeds",label:"RSS订阅",icon:Y,gradient:"linear-gradient(135deg, #D19A66 0%, #FF9800 100%)",onClick:()=>u.push("/admin/rss")},{key:"system_status",label:"系统状态",icon:R,gradient:"linear-gradient(135deg, #C678DD 0%, #AB47BC 100%)",onClick:()=>i()}],j=d=>({config:"primary",skill:"success",model:"warning",media:"info",rss:"danger"})[d]||"info",o=d=>new Date(d).toLocaleString("zh-CN"),i=async()=>{await l.fetchStats(),m.success("统计数据已刷新")},V=async()=>{await l.fetchActivities(),m.success("活动列表已刷新")},M=async()=>{g.value=!0;const d=await l.reloadConfig();g.value=!1,d?m.success("配置重载成功"):m.error("配置重载失败")},O=async()=>{k.value=!0;const d=await l.reloadSkills();k.value=!1,d?m.success("Skill重载成功"):m.error("Skill重载失败")},P=d=>{u.push("/admin/logs")};return K(()=>{l.fetchStats(),l.fetchActivities(),l.fetchDependenciesStatus()}),(d,a)=>{const f=p("el-icon"),b=p("el-card"),S=p("el-col"),D=p("el-row"),v=p("el-button"),z=p("el-tag"),w=p("el-table-column"),I=p("el-table"),G=le("loading");return h(),C("div",re,[e(D,{gutter:20,class:"stats-row"},{default:s(()=>[(h(),C(L,null,$(T,t=>e(S,{span:4,key:t.key},{default:s(()=>[e(b,{class:"stat-card",shadow:"hover",onClick:t.onClick},{default:s(()=>[n("div",{class:"stat-icon",style:x({background:t.gradient})},[e(f,{size:24,color:"#fff"},{default:s(()=>[(h(),E(q(t.icon)))]),_:2},1024)],4),n("div",ue,[n("div",fe,_(c(l).stats[t.key]),1),n("div",_e,_(t.label),1)])]),_:2},1032,["onClick"])]),_:2},1024)),64))]),_:1}),e(D,{gutter:20,class:"deps-row"},{default:s(()=>[e(S,{span:24},{default:s(()=>[e(b,{class:"deps-card"},{header:s(()=>[n("div",pe,[n("span",he,[e(f,null,{default:s(()=>[e(c(R))]),_:1}),a[2]||(a[2]=r(" 第三方依赖状态监控 ",-1))]),e(v,{link:"",onClick:B},{default:s(()=>[e(f,null,{default:s(()=>[e(c(N))]),_:1})]),_:1})])]),default:s(()=>[n("div",me,[(h(!0),C(L,null,$(A.value,t=>(h(),C("div",{key:t.name,class:Z(["dep-item",{"dep-healthy":t.status==="healthy","dep-unhealthy":t.status==="unhealthy","dep-warning":t.status==="warning"}])},[n("div",ge,[n("div",{class:"dep-icon",style:x({background:t.color})},[e(f,{size:20},{default:s(()=>[(h(),E(q(t.icon)))]),_:2},1024)],4),n("div",ve,[e(z,{type:t.status==="healthy"?"success":t.status==="warning"?"warning":"danger",size:"small"},{default:s(()=>[r(_(t.statusText),1)]),_:2},1032,["type"])])]),n("div",ye,[n("div",ke,_(t.name),1),n("div",we,_(t.detail),1),t.latency?(h(),C("div",Ce," 响应时间: "+_(t.latency)+"ms ",1)):ee("",!0)])],2))),128))])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20,class:"actions-row"},{default:s(()=>[e(S,{span:24},{default:s(()=>[e(b,{class:"actions-card"},{header:s(()=>[...a[3]||(a[3]=[n("span",null,"快捷操作",-1)])]),default:s(()=>[n("div",be,[e(v,{type:"primary",loading:g.value,onClick:M},{default:s(()=>[e(f,null,{default:s(()=>[e(c(N))]),_:1}),a[4]||(a[4]=r(" 重载配置 ",-1))]),_:1},8,["loading"]),e(v,{type:"success",loading:k.value,onClick:O},{default:s(()=>[e(f,null,{default:s(()=>[e(c(se))]),_:1}),a[5]||(a[5]=r(" 重载Skill ",-1))]),_:1},8,["loading"]),e(v,{onClick:a[0]||(a[0]=t=>d.$router.push("/admin/logs"))},{default:s(()=>[e(f,null,{default:s(()=>[e(c(te))]),_:1}),a[6]||(a[6]=r(" 查看日志 ",-1))]),_:1}),e(v,{onClick:a[1]||(a[1]=t=>d.$router.push("/admin/config"))},{default:s(()=>[e(f,null,{default:s(()=>[e(c(ae))]),_:1}),a[7]||(a[7]=r(" 系统配置 ",-1))]),_:1})])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20,class:"activities-row"},{default:s(()=>[e(S,{span:24},{default:s(()=>[ne((h(),E(b,{class:"activities-card"},{header:s(()=>[n("div",Se,[a[8]||(a[8]=n("span",null,"最近活动",-1)),e(v,{link:"",onClick:V},{default:s(()=>[e(f,null,{default:s(()=>[e(c(N))]),_:1})]),_:1})])]),default:s(()=>[e(I,{data:c(l).activities,style:{width:"100%"}},{default:s(()=>[e(w,{prop:"timestamp",label:"时间",width:"180"},{default:s(({row:t})=>[r(_(o(t.timestamp)),1)]),_:1}),e(w,{prop:"type",label:"类型",width:"120"},{default:s(({row:t})=>[e(z,{type:j(t.type)},{default:s(()=>[r(_(t.type),1)]),_:2},1032,["type"])]),_:1}),e(w,{prop:"action",label:"操作"}),e(w,{prop:"status",label:"状态",width:"100"},{default:s(({row:t})=>[e(z,{type:t.status==="success"?"success":"danger"},{default:s(()=>[r(_(t.status==="success"?"成功":"失败"),1)]),_:2},1032,["type"])]),_:1}),e(w,{label:"查看",width:"100"},{default:s(({row:t})=>[e(v,{link:"",type:"primary",onClick:Fe=>P(t)},{default:s(()=>[...a[9]||(a[9]=[r("详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})),[[G,c(l).loading]])]),_:1})]),_:1})])}}}),Be=de(De,[["__scopeId","data-v-9fd17e2a"]]);export{Be as default};
//# sourceMappingURL=Dashboard-B33wH8_t.js.map
