{"version":3,"file":"VirtualModels-C_IMi6Cm.js","sources":["../../src/components/KeywordTagInput.vue","../../src/components/ModelDialog.vue","../../src/views/admin/VirtualModels.vue"],"sourcesContent":["<template>\n  <div class=\"keyword-tag-input\">\n    <div class=\"tags-container\">\n      <el-tag\n        v-for=\"(tag, index) in modelValue\"\n        :key=\"tag + index\"\n        closable\n        @close=\"handleRemove(index)\"\n        class=\"keyword-tag\"\n        size=\"default\"\n      >\n        {{ tag }}\n      </el-tag>\n      <el-input\n        v-if=\"inputVisible\"\n        ref=\"inputRef\"\n        v-model=\"inputValue\"\n        size=\"small\"\n        class=\"tag-input\"\n        @keyup.enter=\"handleAdd\"\n        @keyup.escape=\"inputVisible = false\"\n        @blur=\"handleAdd\"\n      />\n      <el-button\n        v-else\n        class=\"button-new-tag\"\n        size=\"small\"\n        @click=\"showInput\"\n        :disabled=\"modelValue.length >= maxTags\"\n      >\n        + {{ placeholder || '添加关键词' }}\n      </el-button>\n    </div>\n    <div class=\"counter\">\n      已添加 {{ modelValue.length }}/{{ maxTags }} 个关键词\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, nextTick } from 'vue'\n\nconst props = defineProps<{\n  modelValue: string[]\n  placeholder?: string\n  maxTags?: number\n}>()\n\nconst emit = defineEmits<{\n  (e: 'update:modelValue', value: string[]): void\n}>()\n\nconst inputVisible = ref(false)\nconst inputValue = ref('')\nconst inputRef = ref<HTMLInputElement>()\n\nconst maxTags = props.maxTags || 50\n\nconst showInput = () => {\n  inputVisible.value = true\n  nextTick(() => {\n    inputRef.value?.focus()\n  })\n}\n\nconst handleAdd = () => {\n  const value = inputValue.value.trim()\n  \n  // 验证\n  if (!value) {\n    inputVisible.value = false\n    inputValue.value = ''\n    return\n  }\n  \n  // 检查重复\n  if (props.modelValue.includes(value)) {\n    inputVisible.value = false\n    inputValue.value = ''\n    return\n  }\n  \n  // 检查数量限制\n  if (props.modelValue.length >= maxTags) {\n    inputVisible.value = false\n    inputValue.value = ''\n    return\n  }\n  \n  // 添加标签\n  const newTags = [...props.modelValue, value]\n  emit('update:modelValue', newTags)\n  \n  inputVisible.value = false\n  inputValue.value = ''\n}\n\nconst handleRemove = (index: number) => {\n  const newTags = [...props.modelValue]\n  newTags.splice(index, 1)\n  emit('update:modelValue', newTags)\n}\n</script>\n\n<style scoped>\n.keyword-tag-input {\n  width: 100%;\n}\n\n.tags-container {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  align-items: center;\n  min-height: 32px;\n  padding: 4px;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  background: #fff;\n}\n\n.keyword-tag {\n  margin: 0;\n}\n\n.tag-input {\n  width: 120px;\n}\n\n.button-new-tag {\n  border-style: dashed;\n}\n\n.counter {\n  margin-top: 4px;\n  font-size: 12px;\n  color: #909399;\n}\n</style>\n","<template>\n  <el-dialog\n    v-model=\"visible\"\n    :title=\"isEdit ? '编辑模型' : '添加模型'\"\n    width=\"700px\"\n    destroy-on-close\n    class=\"vscode-theme-dialog\"\n  >\n    <el-form :model=\"form\" label-width=\"140px\" class=\"vscode-form\">\n      <!-- Basic Info -->\n      <el-divider content-position=\"left\" class=\"vscode-divider\">基础信息</el-divider>\n      \n      <el-form-item label=\"虚拟模型名称\" required>\n        <el-input v-model=\"form.name\" placeholder=\"如: demo1\" class=\"vscode-input\" />\n        <div v-if=\"isEdit && form.name !== originalName\" class=\"name-change-warning\">\n          <el-alert type=\"warning\" :closable=\"false\" show-icon>\n            <template #title>\n              模型名称将从 \"{{ originalName }}\" 修改为 \"{{ form.name }}\"\n            </template>\n          </el-alert>\n        </div>\n      </el-form-item>\n\n      <!-- Proxy Key -->\n      <el-form-item label=\"Proxy Key\" required>\n        <div class=\"proxy-key-row\">\n          <el-input\n            :model-value=\"showProxyKey ? form.proxy_key : maskProxyKey(form.proxy_key)\"\n            placeholder=\"sk-xxxxxxxxxxxxxxxx\"\n            readonly\n            class=\"vscode-input proxy-key-input\"\n          >\n            <template #suffix>\n              <el-button link @click=\"toggleProxyKeyVisibility\" class=\"view-btn\">\n                <el-icon v-if=\"showProxyKey\"><View /></el-icon>\n                <el-icon v-else><Hide /></el-icon>\n              </el-button>\n              <el-button link @click=\"copyProxyKey\" class=\"copy-btn\">\n                <el-icon><DocumentCopy /></el-icon>\n              </el-button>\n            </template>\n          </el-input>\n          <el-button type=\"primary\" @click=\"generateProxyKey\" class=\"generate-btn\">\n            <el-icon><Key /></el-icon>\n            生成\n          </el-button>\n        </div>\n      </el-form-item>\n\n      <el-form-item label=\"Base URL\">\n        <el-input v-model=\"form.base_url\" placeholder=\"https://api.example.com/v1\" class=\"vscode-input\" />\n      </el-form-item>\n\n      <el-form-item label=\"启用状态\">\n        <el-switch v-model=\"form.use\" class=\"vscode-switch\" />\n      </el-form-item>\n\n      <el-form-item label=\"关键字模型切换\">\n        <el-switch v-model=\"form.keyword_switching.enabled\" class=\"vscode-switch\" />\n      </el-form-item>\n\n      <template v-if=\"form.keyword_switching.enabled\">\n        <el-form-item label=\"小模型关键词\">\n          <KeywordTagInput \n            v-model=\"form.keyword_switching.small_keywords\" \n            placeholder=\"添加关键词\"\n            :max-tags=\"50\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"大模型关键词\">\n          <KeywordTagInput \n            v-model=\"form.keyword_switching.big_keywords\"\n            placeholder=\"添加关键词\"\n            :max-tags=\"50\"\n          />\n        </el-form-item>\n      </template>\n\n      <el-form-item label=\"当前模型\">\n        <div class=\"model-switch-row\">\n          <el-radio-group v-model=\"form.current\" class=\"model-switch-group\">\n            <el-radio-button label=\"small\">\n              <el-icon><Sunny /></el-icon> 小模型\n            </el-radio-button>\n            <el-radio-button label=\"big\">\n              <el-icon><Moon /></el-icon> 大模型\n            </el-radio-button>\n          </el-radio-group>\n          <el-tag :type=\"form.current === 'small' ? 'success' : 'warning'\" class=\"current-model-tag\">\n            {{ form.current === 'small' ? form.small.model || '未配置' : form.big.model || '未配置' }}\n          </el-tag>\n        </div>\n      </el-form-item>\n\n      <el-form-item label=\"强制使用\">\n        <el-switch v-model=\"form.force_current\" class=\"vscode-switch\" />\n      </el-form-item>\n\n      <el-form-item label=\"流式支持\">\n        <el-switch v-model=\"form.stream_support\" class=\"vscode-switch\" />\n      </el-form-item>\n\n      <!-- Small Model -->\n      <el-divider content-position=\"left\" class=\"vscode-divider\">小模型配置</el-divider>\n      \n      <el-form-item label=\"模型名称\">\n        <el-input v-model=\"form.small.model\" placeholder=\"如: deepseek-ai/DeepSeek-R1\" class=\"vscode-input\" />\n      </el-form-item>\n      \n      <el-form-item label=\"API Key\">\n        <el-input v-model=\"form.small.api_key\" type=\"password\" placeholder=\"sk-xxx\" class=\"vscode-input\" />\n      </el-form-item>\n      \n      <el-form-item label=\"Base URL\">\n        <el-input v-model=\"form.small.base_url\" placeholder=\"https://api.xxx.com/v1\" class=\"vscode-input\" />\n      </el-form-item>\n      \n      <el-form-item>\n        <el-button @click=\"testConnection('small')\" :loading=\"testing.small\" class=\"vscode-button\">\n          <el-icon><Connection /></el-icon>\n          测试连接\n        </el-button>\n        <span v-if=\"testResults.small\" :class=\"['test-result', testResults.small.status]\">\n          {{ testResults.small.message }}\n        </span>\n      </el-form-item>\n\n      <!-- Big Model -->\n      <el-divider content-position=\"left\" class=\"vscode-divider\">大模型配置</el-divider>\n      \n      <el-form-item label=\"模型名称\">\n        <el-input v-model=\"form.big.model\" placeholder=\"如: Qwen/Qwen2.5-72B-Instruct\" class=\"vscode-input\" />\n      </el-form-item>\n      \n      <el-form-item label=\"API Key\">\n        <el-input v-model=\"form.big.api_key\" type=\"password\" placeholder=\"sk-xxx\" class=\"vscode-input\" />\n      </el-form-item>\n      \n      <el-form-item label=\"Base URL\">\n        <el-input v-model=\"form.big.base_url\" placeholder=\"https://api.xxx.com/v1\" class=\"vscode-input\" />\n      </el-form-item>\n      \n      <el-form-item>\n        <el-button @click=\"testConnection('big')\" :loading=\"testing.big\" class=\"vscode-button\">\n          <el-icon><Connection /></el-icon>\n          测试连接\n        </el-button>\n        <span v-if=\"testResults.big\" :class=\"['test-result', testResults.big.status]\">\n          {{ testResults.big.message }}\n        </span>\n      </el-form-item>\n\n      <!-- Knowledge -->\n      <el-divider content-position=\"left\" class=\"vscode-divider\">知识库配置</el-divider>\n\n      <el-form-item label=\"启用知识库\">\n        <el-switch v-model=\"form.knowledge.enabled\" class=\"vscode-switch\" />\n      </el-form-item>\n\n      <el-form-item label=\"共享知识库\">\n        <el-switch v-model=\"form.knowledge.shared\" class=\"vscode-switch\" />\n      </el-form-item>\n\n      <!-- 知识库 Skill 选择 -->\n      <el-form-item label=\"系统默认Skill\">\n        <el-radio-group v-model=\"form.knowledge.system_default_skill\" class=\"vscode-radio-group\" :loading=\"loadingVersions.knowledge_system\">\n          <el-radio-button label=\"\">不使用</el-radio-button>\n          <el-radio-button \n            v-for=\"version in knowledgeSystemVersions\" \n            :key=\"version\" \n            :label=\"version\"\n          >\n            系统默认 {{ version }}\n          </el-radio-button>\n          <el-empty v-if=\"knowledgeSystemVersions.length === 0 && !loadingVersions.knowledge_system\" description=\"暂无可用版本\" :image-size=\"60\" />\n        </el-radio-group>\n      </el-form-item>\n\n      <el-form-item label=\"自定义Skill\">\n        <div class=\"skill-toggle-row\">\n          <el-switch v-model=\"form.knowledge.use_custom\" class=\"vscode-switch\" />\n          <span class=\"skill-toggle-label\">启用自定义Skill</span>\n        </div>\n      </el-form-item>\n\n      <el-form-item v-if=\"form.knowledge.use_custom\" label=\"自定义Skill版本\">\n        <el-radio-group v-model=\"form.knowledge.custom_skill\" class=\"vscode-radio-group\" :loading=\"loadingVersions.knowledge_custom\">\n          <el-radio-button label=\"\">不使用</el-radio-button>\n          <el-radio-button \n            v-for=\"version in knowledgeCustomVersions\" \n            :key=\"version\" \n            :label=\"version\"\n          >\n            {{ version }}\n          </el-radio-button>\n          <el-empty v-if=\"knowledgeCustomVersions.length === 0 && !loadingVersions.knowledge_custom\" description=\"暂无可用版本\" :image-size=\"60\" />\n        </el-radio-group>\n      </el-form-item>\n\n      <!-- Web Search -->\n      <el-divider content-position=\"left\" class=\"vscode-divider\">联网搜索配置</el-divider>\n\n      <el-form-item label=\"启用联网搜索\">\n        <el-switch v-model=\"form.web_search.enabled\" class=\"vscode-switch\" />\n      </el-form-item>\n\n      <!-- 联网搜索 Skill 选择 -->\n      <el-form-item label=\"系统默认Skill\">\n        <el-radio-group v-model=\"form.web_search.system_default_skill\" class=\"vscode-radio-group\" :loading=\"loadingVersions.websearch_system\">\n          <el-radio-button label=\"\">不使用</el-radio-button>\n          <el-radio-button \n            v-for=\"version in webSearchSystemVersions\" \n            :key=\"version\" \n            :label=\"version\"\n          >\n            系统默认 {{ version }}\n          </el-radio-button>\n          <el-empty v-if=\"webSearchSystemVersions.length === 0 && !loadingVersions.websearch_system\" description=\"暂无可用版本\" :image-size=\"60\" />\n        </el-radio-group>\n      </el-form-item>\n\n      <el-form-item label=\"自定义Skill\">\n        <div class=\"skill-toggle-row\">\n          <el-switch v-model=\"form.web_search.use_custom\" class=\"vscode-switch\" />\n          <span class=\"skill-toggle-label\">启用自定义Skill</span>\n        </div>\n      </el-form-item>\n\n      <el-form-item v-if=\"form.web_search.use_custom\" label=\"自定义Skill版本\">\n        <el-radio-group v-model=\"form.web_search.custom_skill\" class=\"vscode-radio-group\" :loading=\"loadingVersions.websearch_custom\">\n          <el-radio-button label=\"\">不使用</el-radio-button>\n          <el-radio-button \n            v-for=\"version in webSearchCustomVersions\" \n            :key=\"version\" \n            :label=\"version\"\n          >\n            {{ version }}\n          </el-radio-button>\n          <el-empty v-if=\"webSearchCustomVersions.length === 0 && !loadingVersions.websearch_custom\" description=\"暂无可用版本\" :image-size=\"60\" />\n        </el-radio-group>\n      </el-form-item>\n\n      <el-form-item label=\"搜索目标\">\n        <el-checkbox-group v-model=\"form.web_search.targets\" class=\"vscode-checkbox-group\">\n          <el-checkbox label=\"searxng\">SearXNG</el-checkbox>\n          <el-checkbox label=\"librex\">LibreX</el-checkbox>\n          <el-checkbox label=\"4get\">4get</el-checkbox>\n        </el-checkbox-group>\n      </el-form-item>\n    </el-form>\n\n    <template #footer>\n      <div class=\"dialog-footer\">\n        <el-button @click=\"visible = false\" class=\"vscode-button\">取消</el-button>\n        <el-button @click=\"testAllConnections\" class=\"vscode-button\">测试所有连接</el-button>\n        <el-button type=\"primary\" @click=\"handleSubmit\" class=\"vscode-button-primary\">保存</el-button>\n      </div>\n    </template>\n  </el-dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, watch } from 'vue'\nimport { ElMessage, ElEmpty } from 'element-plus'\nimport { DocumentCopy, Key, Connection, View, Hide, Sunny, Moon } from '@element-plus/icons-vue'\nimport type { VirtualModel } from '@/types'\nimport KeywordTagInput from '@/components/KeywordTagInput.vue'\n\nconst props = defineProps<{\n  modelValue: boolean\n  model: VirtualModel | null\n}>()\n\nconst emit = defineEmits<{\n  (e: 'update:modelValue', value: boolean): void\n  (e: 'submit', value: Partial<VirtualModel>, originalName?: string): void\n}>()\n\nconst visible = computed({\n  get: () => props.modelValue,\n  set: (val) => emit('update:modelValue', val)\n})\n\nconst isEdit = computed(() => !!props.model)\n\n// 保存原始模型名称，用于检测名称变更\nconst originalName = ref('')\n\nconst defaultForm = {\n  name: '',\n  proxy_key: '',\n  base_url: '',\n  current: 'small' as 'small' | 'big',\n  force_current: false,\n  stream_support: true,\n  use: true,\n  small: {\n    model: '',\n    api_key: '',\n    base_url: ''\n  },\n  big: {\n    model: '',\n    api_key: '',\n    base_url: ''\n  },\n  knowledge: {\n    enabled: true,\n    shared: false,\n    system_default_skill: null as string | null,\n    custom_skill: null as string | null,\n    use_system_default: true,\n    use_custom: false\n  },\n  web_search: {\n    enabled: false,\n    system_default_skill: null as string | null,\n    custom_skill: null as string | null,\n    use_system_default: true,\n    use_custom: false,\n    targets: ['searxng']\n  },\n  keyword_switching: {\n    enabled: false,\n    small_keywords: [] as string[],\n    big_keywords: [] as string[]\n  }\n}\n\nconst form = ref({ ...defaultForm })\n\n// 测试状态\nconst testing = ref({\n  small: false,\n  big: false\n})\n\n// 测试结果\nconst testResults = ref<{\n  small?: { status: 'success' | 'error'; message: string } | null\n  big?: { status: 'success' | 'error'; message: string } | null\n}>({})\n\n// Proxy Key 显示控制\nconst showProxyKey = ref(false)\n\n// Skill版本列表\nconst knowledgeSystemVersions = ref<string[]>([])\nconst knowledgeCustomVersions = ref<string[]>([])\nconst webSearchSystemVersions = ref<string[]>([])\nconst webSearchCustomVersions = ref<string[]>([])\n\n// 加载状态\nconst loadingVersions = ref({\n  knowledge_system: false,\n  knowledge_custom: false,\n  websearch_system: false,\n  websearch_custom: false\n})\n\n// 获取Skill版本列表\nconst fetchSkillVersions = async (category: string, isCustom: boolean = false) => {\n  const skillType = isCustom ? 'custom' : 'system'\n  const loadingKey = isCustom ? \n    (category === 'knowledge' ? 'knowledge_custom' : 'websearch_custom') : \n    (category === 'knowledge' ? 'knowledge_system' : 'websearch_system')\n\n  loadingVersions.value[loadingKey] = true\n  try {\n    const response = await fetch(`/admin/ai/v1/skills/versions?category=${category}&skill_type=${skillType}`)\n    const data = await response.json()\n    if (data.code === 200 && data.data) {\n      const versions = data.data.versions || []\n      if (category === 'knowledge') {\n        if (isCustom) {\n          knowledgeCustomVersions.value = versions\n        } else {\n          knowledgeSystemVersions.value = versions\n        }\n      } else if (category === 'web_search') {\n        if (isCustom) {\n          webSearchCustomVersions.value = versions\n        } else {\n          webSearchSystemVersions.value = versions\n        }\n      }\n    }\n  } catch (error) {\n    console.error(`获取${category} ${isCustom ? '自定义' : '系统'}Skill版本失败:`, error)\n  } finally {\n    loadingVersions.value[loadingKey] = false\n  }\n}\n\n// 加载所有Skill版本\nconst loadAllSkillVersions = async () => {\n  // 知识库系统Skill\n  await fetchSkillVersions('knowledge', false)\n  // 知识库自定义Skill\n  await fetchSkillVersions('knowledge', true)\n  // 联网搜索系统Skill\n  await fetchSkillVersions('web_search', false)\n  // 联网搜索自定义Skill\n  await fetchSkillVersions('web_search', true)\n}\n\n// 脱敏 Proxy Key\nconst maskProxyKey = (key: string): string => {\n  if (!key || key.length <= 8) return '****'\n  return key.slice(0, 4) + '****' + key.slice(-4)\n}\n\n// 切换 Proxy Key 显示/隐藏\nconst toggleProxyKeyVisibility = () => {\n  showProxyKey.value = !showProxyKey.value\n}\n\n// 生成随机Proxy Key\nfunction generateRandomKey(): string {\n  const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'\n  let result = 'sk-'\n  for (let i = 0; i < 32; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length))\n  }\n  return result\n}\n\nwatch(() => props.model, async (newModel) => {\n  if (newModel) {\n    form.value = {\n      ...defaultForm,\n      ...JSON.parse(JSON.stringify(newModel))\n    }\n    // 保存原始名称\n    originalName.value = newModel.name || ''\n    // 如果没有proxy_key，生成一个\n    if (!form.value.proxy_key) {\n      form.value.proxy_key = generateRandomKey()\n    }\n  } else {\n    form.value = { \n      ...defaultForm,\n      proxy_key: generateRandomKey()\n    }\n    originalName.value = ''\n  }\n  // 加载Skill版本列表\n  await loadAllSkillVersions()\n}, { immediate: true })\n\n// 生成Proxy Key\nconst generateProxyKey = () => {\n  form.value.proxy_key = generateRandomKey()\n  ElMessage.success('Proxy Key 已生成')\n}\n\n// 复制Proxy Key\nconst copyProxyKey = () => {\n  if (!form.value.proxy_key) {\n    ElMessage.warning('Proxy Key 为空')\n    return\n  }\n  navigator.clipboard.writeText(form.value.proxy_key)\n    .then(() => ElMessage.success('Proxy Key 已复制'))\n    .catch(() => ElMessage.error('复制失败'))\n}\n\n// 测试连接\nconst testConnection = async (type: 'small' | 'big') => {\n  const config = form.value[type]\n  if (!config.model || !config.api_key || !config.base_url) {\n    ElMessage.warning('请填写完整的模型配置信息')\n    return\n  }\n\n  testing.value[type] = true\n  testResults.value[type] = null\n  \n  try {\n    // 真实的API测试\n    const response = await fetch(`${config.base_url}/models`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${config.api_key}`,\n        'Content-Type': 'application/json'\n      }\n    })\n\n    if (response.ok) {\n      const data = await response.json()\n      // 检查模型是否在列表中\n      const models = data.data || []\n      const hasModel = models.some((m: any) => m.id === config.model || m.model === config.model)\n      \n      if (hasModel) {\n        testResults.value[type] = {\n          status: 'success',\n          message: `连接成功，模型可用`\n        }\n        ElMessage.success(`${type === 'small' ? '小' : '大'}模型连接成功`)\n      } else {\n        testResults.value[type] = {\n          status: 'success',\n          message: `连接成功，但模型不在列表中`\n        }\n        ElMessage.warning(`${type === 'small' ? '小' : '大'}模型连接成功，但找不到指定模型`)\n      }\n    } else {\n      const errorData = await response.json().catch(() => ({}))\n      testResults.value[type] = {\n        status: 'error',\n        message: `连接失败: ${errorData.error?.message || response.statusText}`\n      }\n      ElMessage.error(`${type === 'small' ? '小' : '大'}模型连接失败: ${errorData.error?.message || response.statusText}`)\n    }\n  } catch (error: any) {\n    testResults.value[type] = {\n      status: 'error',\n      message: `连接错误: ${error.message}`\n    }\n    ElMessage.error(`${type === 'small' ? '小' : '大'}模型连接错误: ${error.message}`)\n  } finally {\n    testing.value[type] = false\n  }\n}\n\nconst testAllConnections = async () => {\n  await testConnection('small')\n  await testConnection('big')\n}\n\nconst handleSubmit = () => {\n  if (!form.value.name) {\n    ElMessage.warning('请输入虚拟模型名称')\n    return\n  }\n  if (!form.value.proxy_key) {\n    ElMessage.warning('请生成Proxy Key')\n    return\n  }\n  // 编辑模式下传递原始名称，用于后端识别是哪个模型\n  if (isEdit.value && originalName.value) {\n    emit('submit', { ...form.value }, originalName.value)\n  } else {\n    emit('submit', { ...form.value })\n  }\n}\n</script>\n\n<style scoped>\n/* GitHub 主题配色 - 与左侧菜单栏一致 */\n.vscode-theme-dialog :deep(.el-dialog) {\n  background: #252526;\n  border: 1px solid #3C3C3C;\n}\n\n.vscode-theme-dialog :deep(.el-dialog__header) {\n  background: #1E1E1E;\n  border-bottom: 1px solid #3C3C3C;\n  margin-right: 0;\n  padding: 15px 20px;\n}\n\n.vscode-theme-dialog :deep(.el-dialog__title) {\n  color: #c9d1d9;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.vscode-theme-dialog :deep(.el-dialog__body) {\n  background: #252526;\n  color: #c9d1d9;\n  max-height: 60vh;\n  overflow-y: auto;\n}\n\n.vscode-theme-dialog :deep(.el-dialog__footer) {\n  background: #1E1E1E;\n  border-top: 1px solid #3C3C3C;\n}\n\n/* 表单项标签 */\n.vscode-form :deep(.el-form-item__label) {\n  color: #858585;\n}\n\n/* 输入框 - 白色背景 */\n.vscode-input :deep(.el-input__wrapper) {\n  background: #ffffff;\n  box-shadow: 0 0 0 1px #d1d5da inset;\n}\n\n.vscode-input :deep(.el-input__inner) {\n  background: transparent;\n  color: #24292e;\n}\n\n.vscode-input :deep(.el-input__inner::placeholder) {\n  color: #6e7781;\n}\n\n/* Proxy Key 行 */\n.proxy-key-row {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n}\n\n.proxy-key-input {\n  flex: 1;\n}\n\n.copy-btn {\n  color: #858585;\n}\n\n.copy-btn:hover,\n.view-btn:hover {\n  color: #007acc;\n}\n\n.generate-btn {\n  background: #007acc;\n  border-color: #007acc;\n}\n\n.generate-btn:hover {\n  background: #1177bb;\n  border-color: #1177bb;\n}\n\n/* 分隔线 */\n.vscode-divider :deep(.el-divider__text) {\n  background: #252526;\n  color: #858585;\n}\n\n/* 按钮 */\n.vscode-button {\n  background: #2D2D30;\n  border-color: #3C3C3C;\n  color: #c9d1d9;\n}\n\n.vscode-button:hover {\n  background: #3C3C3C;\n  border-color: #858585;\n  color: #ffffff;\n}\n\n.vscode-button-primary {\n  background: #238636;\n  border-color: #238636;\n  color: #ffffff;\n}\n\n.vscode-button-primary:hover {\n  background: #2ea043;\n  border-color: #2ea043;\n}\n\n/* 单选按钮组 */\n.vscode-radio-group :deep(.el-radio-button__inner) {\n  background: #2D2D30;\n  border-color: #3C3C3C;\n  color: #858585;\n}\n\n.vscode-radio-group :deep(.el-radio-button__original-radio:checked + .el-radio-button__inner) {\n  background: #007ACC;\n  border-color: #007ACC;\n  color: #ffffff;\n}\n\n/* 开关 */\n.vscode-switch :deep(.el-switch__core) {\n  background: #3C3C3C;\n  border-color: #3C3C3C;\n}\n\n.vscode-switch.is-checked :deep(.el-switch__core) {\n  background: #007ACC;\n  border-color: #007ACC;\n}\n\n/* 复选框 */\n.vscode-checkbox-group :deep(.el-checkbox__input) .el-checkbox__inner {\n  background: #2D2D30;\n  border-color: #3C3C3C;\n}\n\n.vscode-checkbox-group :deep(.el-checkbox__input.is-checked) .el-checkbox__inner {\n  background: #007ACC;\n  border-color: #007ACC;\n}\n\n.vscode-checkbox-group :deep(.el-checkbox__label) {\n  color: #858585;\n}\n\n/* Skill 切换行 */\n.skill-toggle-row {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.skill-toggle-label {\n  color: #858585;\n  font-size: 14px;\n}\n\n/* 测试结果 */\n.test-result {\n  margin-left: 10px;\n  font-size: 13px;\n}\n\n.test-result.success {\n  color: #3fb950;\n}\n\n.test-result.error {\n  color: #f85149;\n}\n\n.dialog-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n}\n\n/* 名称变更警告 */\n.name-change-warning {\n  margin-top: 8px;\n}\n\n.name-change-warning :deep(.el-alert) {\n  padding: 8px 12px;\n}\n\n.name-change-warning :deep(.el-alert__title) {\n  font-size: 12px;\n  line-height: 1.4;\n}\n\n/* 模型切换行 */\n.model-switch-row {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.model-switch-group :deep(.el-radio-button__inner) {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 8px 16px;\n}\n\n.model-switch-group :deep(.el-icon) {\n  font-size: 14px;\n}\n</style>\n","<template>\n  <div class=\"virtual-models\">\n    <!-- Toolbar -->\n    <div class=\"toolbar\">\n      <el-button type=\"primary\" @click=\"showAddDialog = true\">\n        <el-icon><Plus /></el-icon>添加模型\n      </el-button>\n      <el-input\n        v-model=\"searchQuery\"\n        placeholder=\"搜索模型名称\"\n        clearable\n        style=\"width: 240px; margin-left: 12px;\"\n      >\n        <template #prefix>\n          <el-icon><Search /></el-icon>\n        </template>\n      </el-input>\n      <el-select v-model=\"statusFilter\" placeholder=\"状态筛选\" style=\"width: 120px; margin-left: 12px;\">\n        <el-option label=\"全部\" value=\"all\" />\n        <el-option label=\"启用\" value=\"enabled\" />\n        <el-option label=\"禁用\" value=\"disabled\" />\n      </el-select>\n    </div>\n\n    <!-- Models Table -->\n    <el-card class=\"table-card\" v-loading=\"modelStore.loading\">\n      <el-table :data=\"filteredModels\" style=\"width: 100%\">\n        <el-table-column prop=\"name\" label=\"名称\" width=\"150\">\n          <template #default=\"{ row }\">\n            <el-link type=\"primary\" @click=\"copyToClipboard(row.name)\">{{ row.name }}</el-link>\n          </template>\n        </el-table-column>\n        \n        <el-table-column prop=\"proxy_key\" label=\"Proxy Key\" width=\"400\">\n          <template #default=\"{ row }\">\n            <div class=\"proxy-key-cell\">\n              <span>{{ maskKey(row.proxy_key) }}</span>\n              <el-button link @click=\"copyToClipboard(row.proxy_key)\">\n                <el-icon><CopyDocument /></el-icon>\n              </el-button>\n            </div>\n          </template>\n        </el-table-column>\n        \n        <el-table-column label=\"系统URL\" width=\"580\">\n          <template #default=\"{ row }\">\n            <el-link type=\"info\" @click=\"copyToClipboard(getSystemUrl(row.name))\">\n              {{ getSystemUrl(row.name) }}\n            </el-link>\n          </template>\n        </el-table-column>\n        \n        <el-table-column label=\"当前模型\" width=\"260\">\n          <template #default=\"{ row }\">\n            <div class=\"current-model-cell\">\n              <el-tag :type=\"row.current === 'small' ? 'success' : 'warning'\">\n                {{ row.current === 'small' ? '小模型' : '大模型' }}\n              </el-tag>\n              <el-button \n                size=\"small\" \n                @click=\"handleSwitchModel(row)\"\n                :disabled=\"row.force_current\"\n              >\n                切换\n              </el-button>\n            </div>\n          </template>\n        </el-table-column>\n        \n        <el-table-column label=\"状态\" width=\"150\">\n          <template #default=\"{ row }\">\n            <el-switch\n              v-model=\"row.use\"\n              @change=\"(val: boolean) => handleStatusChange(row, val)\"\n            />\n          </template>\n        </el-table-column>\n        \n        <el-table-column label=\"操作\" width=\"380\" fixed=\"right\">\n          <template #default=\"{ row }\">\n            <el-button link type=\"primary\" @click=\"handleEdit(row)\">编辑</el-button>\n            <el-button \n              link \n              type=\"success\" \n              @click=\"testModel(row)\"\n              :loading=\"testingModels[row.name]\"\n            >\n              <el-icon><Connection /></el-icon>模型测试\n            </el-button>\n            <el-button link type=\"danger\" @click=\"handleDelete(row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <!-- Add/Edit Dialog -->\n    <ModelDialog\n      v-model=\"showAddDialog\"\n      :model=\"editingModel\"\n      @submit=\"handleSubmit\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Plus, Search, CopyDocument, Connection } from '@element-plus/icons-vue'\nimport { useModelStore } from '@/stores'\nimport type { VirtualModel } from '@/types'\nimport ModelDialog from '@/components/ModelDialog.vue'\n\nconst modelStore = useModelStore()\nconst searchQuery = ref('')\nconst statusFilter = ref('all')\nconst showAddDialog = ref(false)\nconst editingModel = ref<VirtualModel | null>(null)\n\n// 模型测试状态\nconst testingModels = ref<Record<string, boolean>>({})\nconst testResults = ref<Record<string, { small: boolean; big: boolean; smallMsg?: string; bigMsg?: string }>>({})\n\nconst filteredModels = computed(() => {\n  let result = modelStore.models\n  \n  if (searchQuery.value) {\n    result = result.filter(m => \n      m.name.toLowerCase().includes(searchQuery.value.toLowerCase())\n    )\n  }\n  \n  if (statusFilter.value !== 'all') {\n    result = result.filter(m => \n      statusFilter.value === 'enabled' ? m.use : !m.use\n    )\n  }\n  \n  return result\n})\n\nconst maskKey = (key: string) => {\n  if (key.length <= 8) return '****'\n  return key.slice(0, 4) + '****' + key.slice(-4)\n}\n\nconst getSystemUrl = (name: string) => {\n  return `http://localhost:8000/proxy/ai/v1/chat/completions?model=${name}`\n}\n\nconst copyToClipboard = async (text: string) => {\n  try {\n    await navigator.clipboard.writeText(text)\n    ElMessage.success('已复制到剪贴板')\n  } catch {\n    ElMessage.error('复制失败')\n  }\n}\n\nconst handleStatusChange = async (model: VirtualModel, enabled: boolean) => {\n  const success = await modelStore.updateModel(model.name, { use: enabled })\n  if (success) {\n    ElMessage.success(enabled ? '模型已启用' : '模型已禁用')\n  } else {\n    model.use = !enabled\n    ElMessage.error('操作失败')\n  }\n}\n\nconst handleSwitchModel = async (model: VirtualModel) => {\n  const newSize = model.current === 'small' ? 'big' : 'small'\n  const success = await modelStore.switchModel(model.name, newSize)\n  if (success) {\n    ElMessage.success(`已切换到${newSize === 'small' ? '小' : '大'}模型`)\n  } else {\n    ElMessage.error('切换失败')\n  }\n}\n\nconst handleEdit = (model: VirtualModel) => {\n  editingModel.value = { ...model }\n  showAddDialog.value = true\n}\n\nconst handleDelete = async (model: VirtualModel) => {\n  try {\n    await ElMessageBox.confirm(\n      `确定要删除模型 \"${model.name}\" 吗？`,\n      '确认删除',\n      {\n        confirmButtonText: '删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }\n    )\n    const success = await modelStore.deleteModel(model.name)\n    if (success) {\n      ElMessage.success('删除成功')\n    } else {\n      ElMessage.error('删除失败')\n    }\n  } catch {\n    // Cancelled\n  }\n}\n\nconst handleSubmit = async (modelData: Partial<VirtualModel>, originalName?: string) => {\n  // 检查名称唯一性\n  if (modelData.name) {\n    const isDuplicate = modelStore.models.some(m => \n      m.name === modelData.name && \n      m.name !== (originalName || editingModel.value?.name)\n    )\n    if (isDuplicate) {\n      ElMessage.error(`模型名称 \"${modelData.name}\" 已存在，请使用其他名称`)\n      return\n    }\n  }\n\n  let success\n  if (editingModel.value) {\n    // 使用原始名称更新（可能名称已变更）\n    const targetName = originalName || editingModel.value.name\n    success = await modelStore.updateModel(targetName, modelData)\n  } else {\n    // 创建时检查名称是否已存在\n    const isNameExists = modelStore.models.some(m => m.name === modelData.name)\n    if (isNameExists) {\n      ElMessage.error(`模型名称 \"${modelData.name}\" 已存在，请使用其他名称`)\n      return\n    }\n    success = await modelStore.createModel(modelData as Omit<VirtualModel, 'proxy_key'>)\n  }\n  \n  if (success) {\n    ElMessage.success(editingModel.value ? '更新成功' : '创建成功')\n    showAddDialog.value = false\n    editingModel.value = null\n  } else {\n    ElMessage.error(editingModel.value ? '更新失败' : '创建失败')\n  }\n}\n\n// 测试单个模型连接\nconst testModelConnection = async (modelConfig: { model: string; api_key: string; base_url: string }, modelType: 'small' | 'big'): Promise<{ success: boolean; message: string }> => {\n  // 参数验证\n  if (!modelConfig.model || !modelConfig.model.trim()) {\n    return { success: false, message: '模型名称未配置' }\n  }\n  if (!modelConfig.base_url || !modelConfig.base_url.trim()) {\n    return { success: false, message: 'Base URL未配置' }\n  }\n  if (!modelConfig.api_key || !modelConfig.api_key.trim()) {\n    return { success: false, message: 'API Key未配置' }\n  }\n\n  try {\n    const response = await fetch('/admin/ai/v1/models/test-connection', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(modelConfig)\n    })\n    \n    if (!response.ok) {\n      const errorText = await response.text()\n      return { \n        success: false, \n        message: `服务器错误 (${response.status}): ${errorText || '未知错误'}` \n      }\n    }\n    \n    const result = await response.json()\n    if (result.code === 200) {\n      return { success: true, message: '连接成功' }\n    } else if (result.code === 401) {\n      return { success: false, message: 'API Key无效或已过期' }\n    } else if (result.code === 400) {\n      return { success: false, message: `请求错误: ${result.message}` }\n    } else if (result.code === 408 || result.code === 503) {\n      return { success: false, message: `连接问题: ${result.message}` }\n    } else {\n      return { success: false, message: result.message || `连接失败 (错误码: ${result.code})` }\n    }\n  } catch (error: any) {\n    console.error('模型连接测试失败:', error)\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\n      return { success: false, message: '网络请求失败，请检查网络连接' }\n    }\n    return { success: false, message: `网络错误: ${error.message || '未知错误'}` }\n  }\n}\n\n// 测试模型（顺序测试大小模型，避免并发问题）\nconst testModel = async (model: VirtualModel) => {\n  testingModels.value[model.name] = true\n  \n  try {\n    ElMessage.info(`开始测试模型 \"${model.name}\"...`)\n    \n    // 先测试小模型\n    const smallResult = await testModelConnection(model.small, 'small')\n    // 再测试大模型（避免并发导致的连接问题）\n    const bigResult = await testModelConnection(model.big, 'big')\n    \n    // 保存测试结果\n    testResults.value[model.name] = {\n      small: smallResult.success,\n      big: bigResult.success,\n      smallMsg: smallResult.message,\n      bigMsg: bigResult.message\n    }\n    \n    // 显示测试结果\n    const smallStatus = smallResult.success ? '✅' : '❌'\n    const bigStatus = bigResult.success ? '✅' : '❌'\n    \n    await ElMessageBox.alert(\n      `<div style=\"line-height: 1.8;\">\n        <p><strong>模型测试完成 - ${model.name}</strong></p>\n        <p>${smallStatus} <strong>小模型</strong> (${model.small.model || '未配置'})</p>\n        <p style=\"margin-left: 24px; color: ${smallResult.success ? '#67c23a' : '#f56c6c'};\">${smallResult.message}</p>\n        <p>${bigStatus} <strong>大模型</strong> (${model.big.model || '未配置'})</p>\n        <p style=\"margin-left: 24px; color: ${bigResult.success ? '#67c23a' : '#f56c6c'};\">${bigResult.message}</p>\n      </div>`,\n      '模型测试结果',\n      {\n        confirmButtonText: '确定',\n        dangerouslyUseHTMLString: true,\n        type: smallResult.success && bigResult.success ? 'success' : smallResult.success || bigResult.success ? 'warning' : 'error'\n      }\n    )\n  } catch (error: any) {\n    console.error('模型测试过程发生错误:', error)\n    ElMessage.error(`测试过程发生错误: ${error.message || '未知错误'}`)\n  } finally {\n    testingModels.value[model.name] = false\n  }\n}\n\nonMounted(() => {\n  modelStore.fetchModels()\n})\n</script>\n\n<style scoped>\n.virtual-models {\n  padding: 0;\n}\n\n.toolbar {\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n}\n\n.table-card {\n  background: #252526;\n  border: 1px solid #3C3C3C;\n}\n\n.proxy-key-cell {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.current-model-cell {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n:deep(.el-card__header) {\n  border-bottom: 1px solid #3C3C3C;\n}\n\n:deep(.el-table) {\n  background: transparent;\n}\n\n:deep(.el-table th),\n:deep(.el-table tr) {\n  background: transparent;\n}\n\n:deep(.el-table th.el-table__cell) {\n  color: var(--text-secondary) !important;\n}\n\n/* 统一\"操作\"列和\"状态\"列表头的背景色 */\n:deep(.el-table .el-table__header-wrapper th.el-table__cell),\n:deep(.el-table .el-table__fixed-header-wrapper th.el-table__cell) {\n  background-color: var(--bg-tertiary) !important;\n}\n\n:deep(.el-table--enable-row-hover .el-table__body tr:hover > td) {\n  background: var(--bg-hover);\n}\n</style>\n"],"names":["props","__props","emit","__emit","inputVisible","ref","inputValue","inputRef","maxTags","showInput","nextTick","_a","handleAdd","value","newTags","handleRemove","index","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","tag","_createBlock","_component_el_tag","$event","_component_el_input","_component_el_button","_unref","_createTextVNode","_hoisted_3","_toDisplayString","visible","computed","val","isEdit","originalName","defaultForm","form","testing","testResults","showProxyKey","knowledgeSystemVersions","knowledgeCustomVersions","webSearchSystemVersions","webSearchCustomVersions","loadingVersions","fetchSkillVersions","category","isCustom","skillType","loadingKey","data","versions","error","loadAllSkillVersions","maskProxyKey","key","toggleProxyKeyVisibility","generateRandomKey","chars","result","i","watch","newModel","generateProxyKey","ElMessage","copyProxyKey","testConnection","type","config","response","m","errorData","_b","testAllConnections","handleSubmit","_component_el_dialog","_hoisted_6","_createVNode","_cache","_component_el_form","_component_el_divider","_component_el_form_item","_component_el_alert","_component_el_icon","View","Hide","DocumentCopy","Key","_component_el_switch","KeywordTagInput","_component_el_radio_group","_component_el_radio_button","Sunny","Moon","Connection","_normalizeClass","version","ElEmpty","_hoisted_4","_hoisted_5","_component_el_checkbox_group","_component_el_checkbox","modelStore","useModelStore","searchQuery","statusFilter","showAddDialog","editingModel","testingModels","filteredModels","maskKey","getSystemUrl","name","copyToClipboard","text","handleStatusChange","model","enabled","handleSwitchModel","newSize","handleEdit","handleDelete","ElMessageBox","modelData","success","targetName","testModelConnection","modelConfig","modelType","errorText","testModel","smallResult","bigResult","smallStatus","bigStatus","onMounted","Plus","Search","_component_el_select","_component_el_option","_component_el_card","_component_el_table","_component_el_table_column","_withCtx","row","_component_el_link","CopyDocument","_directive_loading","ModelDialog"],"mappings":"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"}